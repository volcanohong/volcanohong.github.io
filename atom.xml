<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Volcanohong&#39;s Learning Notes</title>
  <subtitle>Enjoy everything in everyday</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://volcanohong.github.com/"/>
  <updated>2017-03-12T04:31:15.000Z</updated>
  <id>http://volcanohong.github.com/</id>
  
  <author>
    <name>Volcanohong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java Cookie</title>
    <link href="http://volcanohong.github.com/2017/02/20/java-cookie/"/>
    <id>http://volcanohong.github.com/2017/02/20/java-cookie/</id>
    <published>2017-02-20T22:09:45.000Z</published>
    <updated>2017-03-12T04:31:15.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;http-only-and-secure-flag&quot;&gt;&lt;a href=&quot;#HTTP-Only-and-Secure-Flag&quot; class=&quot;headerlink&quot; title=&quot;HTTP Only and Secure Flag&quot;&gt;&lt;/a&gt;&lt;strong&gt;HTTP Only and Secure Flag&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Set httpOnly and secure flags on session cookie.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;jsessionid&quot;&gt;&lt;a href=&quot;#JSESSIONID&quot; class=&quot;headerlink&quot; title=&quot;JSESSIONID&quot;&gt;&lt;/a&gt;&lt;strong&gt;JSESSIONID&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For JSESSIONID, we can upgrade web servlet to version 3.0,&lt;br&gt;update &lt;code&gt;web.xml&lt;/code&gt; as&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;web-app&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;version&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;3.0&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://java.sun.com/xml/ns/javaee&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;xmlns:xsi&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;xsi:schemaLocation&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Then, in &lt;code&gt;web.xml&lt;/code&gt;, add &lt;code&gt;&amp;lt;cookie-config&amp;gt;&lt;/code&gt; as&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;session-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;cookie-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;http-only&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;http-only&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;secure&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;secure&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;cookie-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;session-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;self-defined-cookie&quot;&gt;&lt;a href=&quot;#Self-defined-Cookie&quot; class=&quot;headerlink&quot; title=&quot;Self-defined Cookie&quot;&gt;&lt;/a&gt;&lt;strong&gt;Self-defined Cookie&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Somehow, the above method does not work on a self-defined cookie in my case.&lt;/p&gt;
&lt;p&gt;Here we introducing an alternative solution.&lt;/p&gt;
&lt;p&gt;Implement a &lt;code&gt;security filter&lt;/code&gt; and made a mapping to the pages who need filter.&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;Security Filter&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-class&lt;/span&gt;&amp;gt;&lt;/span&gt;common.SecurityFilter&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-class&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-mapping&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;Security Filter&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;url-pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;*.jsf&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;url-pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-mapping&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Implement a wrapper that extends &lt;code&gt;HttpServletResponseWrapper&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SecureCookieSetter&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;HttpServletResponseWrapper&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SecureCookieSetter&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(HttpServletResponse response)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;(response);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name, String value)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((name.equals(&lt;span class=&quot;string&quot;&gt;&quot;Set-Cookie&quot;&lt;/span&gt;)) &amp;amp;&amp;amp; (!value.matches(&lt;span class=&quot;string&quot;&gt;&quot;(^|.*;)\\s*Secure&quot;&lt;/span&gt;))) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            value = value + &lt;span class=&quot;string&quot;&gt;&quot;;Secure&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//        if ((name.equals(&quot;Set-Cookie&quot;)) &amp;amp;&amp;amp; (!value.matches(&quot;(^|.*;)\\s*HttpOnly&quot;))) &amp;#123;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//            value = value + &quot;;HttpOnly&quot;;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//        &amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.setHeader(name, value);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Implement &lt;code&gt;security filter&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SecurityFilter&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Filter&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;doFilter&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(ServletRequest request, ServletResponse response, FilterChain chain)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException, ServletException &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        HttpServletRequest httpReq = (HttpServletRequest) request;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        HttpServletResponse httpResp = (HttpServletResponse) response;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// wrap the response&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        response = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; SecureCookieSetter(httpResp);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// touch the session if the SessionKey dose not change&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        httpReq.getSession();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// overwriting the cookie with Secure attribute set&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        httpResp.setHeader(&lt;span class=&quot;string&quot;&gt;&quot;Set-Cookie&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;SessionKey=&quot;&lt;/span&gt; + sessionKey + &lt;span class=&quot;string&quot;&gt;&quot;;Path=/&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;understanding-jsessionid&quot;&gt;&lt;a href=&quot;#Understanding-JSESSIONID&quot; class=&quot;headerlink&quot; title=&quot;Understanding JSESSIONID&quot;&gt;&lt;/a&gt;&lt;strong&gt;Understanding JSESSIONID&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;JSESSIONID is a ID generated by Servlet container like Tomcat or Jetty and used for session management in J2EE web application for http protocol.&lt;br&gt;The ID is sent to the client either within a cookie (default) or as part of the URL (called URLrewriting, used only if cookies are disabled on the browser).&lt;/p&gt;
&lt;p&gt;How JSESSIONID works?&lt;/p&gt;
&lt;p&gt;When the first request (that demands a creation of session) arrives on a J2EE server, the server creates HTTPSession object and sends the sessionID to the browser. The browser then send the same sessionId for every subsequent requests.&lt;br&gt;Thus the stateless protocol becomes a stateful one.&lt;/p&gt;
&lt;p&gt;There are 2 ways a request(from browser) notifies a container/server to start a new session.&lt;br&gt;Requesting a jsp page. (as we saw above)&lt;br&gt;The container creates certain implicit objects for a JSP and one among those is the HTTPSession object. HTTPSession object holds the sessionId which is written to the response header. You can alter the default behaviour by adding this directive&lt;br&gt;&lt;code&gt;&amp;lt;%@ page session=&amp;quot;false&amp;quot;%&amp;gt;&lt;/code&gt;&lt;br&gt;Requesting a servlet that has code to initiate the creation by calling,&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;request.getSession() - returns a HTTPSession object &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; it already exists &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; creates a &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; one&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;request.getSession(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;) - same as above&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;request.getSession(&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;) - returns a pre-existing session &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; it exits &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; doesn&lt;span class=&quot;string&quot;&gt;&#39;t create one.&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ref&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/16398327/set-httponly-and-secure-flags-on-session-cookie-in-google-app-engine&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Response wrapper&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cs-repository.info/2014/07/understanding-jsessionid.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Understand jsessionid&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;HTTP-Only-and-Secure-Flag&quot;&gt;&lt;a href=&quot;#HTTP-Only-and-Secure-Flag&quot; class=&quot;headerlink&quot; title=&quot;HTTP Only and Secure Flag&quot;&gt;&lt;/a&gt;&lt;strong&gt;HTTP Only and Secure Flag&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Set httpOnly and secure flags on session cookie.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;JSESSIONID&quot;&gt;&lt;a href=&quot;#JSESSIONID&quot; class=&quot;headerlink&quot; title=&quot;JSESSIONID&quot;&gt;&lt;/a&gt;&lt;strong&gt;JSESSIONID&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For JSESSIONID, we can upgrade web servlet to version 3.0,&lt;br&gt;update &lt;code&gt;web.xml&lt;/code&gt; as&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;web-app&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;version&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;3.0&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://java.sun.com/xml/ns/javaee&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;xmlns:xsi&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;xsi:schemaLocation&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Then, in &lt;code&gt;web.xml&lt;/code&gt;, add &lt;code&gt;&amp;lt;cookie-config&amp;gt;&lt;/code&gt; as&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;session-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;cookie-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;http-only&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;http-only&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;secure&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;secure&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;cookie-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;session-config&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://volcanohong.github.com/categories/Java/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
      <category term="cookie" scheme="http://volcanohong.github.com/tags/cookie/"/>
    
  </entry>
  
  <entry>
    <title>Angular2 Notes V</title>
    <link href="http://volcanohong.github.com/2017/02/09/angular2-notes-5/"/>
    <id>http://volcanohong.github.com/2017/02/09/angular2-notes-5/</id>
    <published>2017-02-09T22:03:55.000Z</published>
    <updated>2017-03-12T04:32:26.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;interval-and-clock-ticker&quot;&gt;&lt;a href=&quot;#Interval-and-Clock-Ticker&quot; class=&quot;headerlink&quot; title=&quot;Interval and Clock Ticker&quot;&gt;&lt;/a&gt;&lt;strong&gt;Interval and Clock Ticker&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Use &lt;a href=&quot;http://reactivex.io/rxjs/file/es6/observable/IntervalObservable.js.html#lineNumber9&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IntervalObservable&lt;/a&gt; in &lt;code&gt;rxjs&lt;/code&gt; to implement interval in angular 2. &lt;code&gt;Create(period)&lt;/code&gt; is a static method, which creates an Observable that emits sequential numbers every specified interval of time.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; IntervalObservable &amp;#125; from &lt;span class=&quot;string&quot;&gt;&#39;rxjs/observable/IntervalObservable&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Component&lt;/span&gt;(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &lt;span class=&quot;string&quot;&gt;&#39;demo&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    templateUrl: &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;div&amp;gt;&amp;#123;&amp;#123;time | date:&#39;&lt;/span&gt;HH:mm:ss&lt;span class=&quot;string&quot;&gt;&#39;&amp;#125;&amp;#125;&amp;lt;/div&amp;gt;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;export &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Demo&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OnInit&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    time:number = Date.now();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ngOnInit() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        IntervalObservable.create(&lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;).subscribe(() =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.time = Date.now());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;ngonchanges-not-detect-changes-in-object&quot;&gt;&lt;a href=&quot;#ngOnChanges-Not-Detect-Changes-in-Object&quot; class=&quot;headerlink&quot; title=&quot;ngOnChanges Not Detect Changes in Object&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;code&gt;ngOnChanges&lt;/code&gt; Not Detect Changes in Object&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;During change detection, when Angular checks components’ input properties for change, it uses (essentially) === for dirty checking. For arrays, this means the array references (only) are dirty checked. Since the &lt;code&gt;rawLapsData&lt;/code&gt; array reference isn’t changing, &lt;code&gt;ngOnChanges()&lt;/code&gt; will not be fired.&lt;/p&gt;
&lt;p&gt;Two possible solutions:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Implement &lt;code&gt;ngDoCheck()&lt;/code&gt; and perform your own change detection logic to determine if the array contents have changed.&lt;/li&gt;
&lt;li&gt;Assign a new array to &lt;code&gt;rawLapsData&lt;/code&gt; whenever you make any changes to the array contents. Then &lt;code&gt;ngOnChanges()&lt;/code&gt; will be called because the array (reference) will appear as a change.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;number-pipe-parameters&quot;&gt;&lt;a href=&quot;#Number-Pipe-Parameters&quot; class=&quot;headerlink&quot; title=&quot;Number Pipe Parameters&quot;&gt;&lt;/a&gt;&lt;strong&gt;Number Pipe Parameters&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example,&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&amp;#123; tmpNumber | number : &#39;1.2-2&#39; &amp;#125;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;The parameter has this syntax:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;{minIntegerDigits}.{minFractionDigits}-{maxFractionDigits}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;So the example of ‘1.2-2’ means:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A minimum of 1 digit will be shown before decimal point.&lt;/li&gt;
&lt;li&gt;Show at least 2 digits after decimal point.&lt;/li&gt;
&lt;li&gt;No more than 2 digits.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;matrix-url&quot;&gt;&lt;a href=&quot;#Matrix-URL&quot; class=&quot;headerlink&quot; title=&quot;Matrix URL&quot;&gt;&lt;/a&gt;&lt;strong&gt;Matrix URL&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Matrix parameters are tied to a path segment, while query parameters are tied to the URL. They have different semantics.&lt;/p&gt;
&lt;p&gt;Maybe it’s hard to tell because you always see it at the end of the URL, but this is also matrix paramters&lt;br&gt;&lt;code&gt;localhost:3000/heroes;id=15;foo=foo/bar/baz&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;The parameters are tied to heroes. When you access the route.url, you will see this&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.route.url.subscribe((url: UrlSegment[]) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  let heroes = url[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  let heroesMatrix = heroes.parameters();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// heroes should contain id=5, foo=foo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  let bar = url[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;].path;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  let baz = url[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;].path;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Is the matrix url notation the “default” to creating urls with parameters or is better to use the “old” notation with ?&lt;/p&gt;
&lt;p&gt;No, both could be used, and how to use (create) them is completely different&lt;/p&gt;
&lt;p&gt;matrix parameters are tied to each path, by passing an object after the path in the array&lt;/p&gt;
&lt;p&gt;&lt;code&gt;router.navigate([&amp;#39;/foo&amp;#39;, { id:1 }, &amp;#39;bar&amp;#39;, {baz: 2 } ])&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Here you will get &lt;code&gt;/foo;id=1/bar;baz=2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Query parameters are created by passing the NavigationExtras as the second argument to navigate&lt;/p&gt;
&lt;p&gt;&lt;code&gt;router.navigate([&amp;#39;/foo&amp;#39;], { queryParams: { bar: 1, baz: 2 }});&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Here you get &lt;code&gt;/foo?bar=1&amp;amp;baz=2&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;See also:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/q/401981/2587435&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;When to use query parameters versus matrix parameters?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/q/2048121/2587435&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;URL matrix parameters vs. request parameters&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;canactivate-return-observable&quot;&gt;&lt;a href=&quot;#canActivate-Return-Observable&quot; class=&quot;headerlink&quot; title=&quot;canActivate Return Observable&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;code&gt;canActivate&lt;/code&gt; Return Observable&lt;boolean&gt;&lt;/boolean&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;CanActive&lt;/code&gt; is an interface, that indicates a class can be implement to be a guard deciding if a route can be activated.&lt;/li&gt;
&lt;li&gt;Implement &lt;code&gt;canActivate()&lt;/code&gt; method. It can return with 3 types.&lt;br&gt;&lt;code&gt;canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) : Observable&amp;lt;boolean&amp;gt;|Promise&amp;lt;boolean&amp;gt;|boolean&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;We can get previous path through RouterStateSnapshot.&lt;/li&gt;
&lt;li&gt;Passing parameters via router.navigate(), and the passed params are matrix URL pattern rather than query params.&lt;br&gt;Have to pass the matrix URL parameters to the redirected error page, so that the error page knows what is the link that user wants to access causing an error. &lt;/li&gt;
&lt;li&gt;Hope to replace &lt;code&gt;window.location.href&lt;/code&gt;in the future, it is not written in angular way.&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;canActivate(route:ActivatedRouteSnapshot, state:RouterStateSnapshot): Observable&amp;lt;&lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt;&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path = state.url;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.roleResourceService.checkStaffRoleResource(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            .map(isActivate =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!isActivate) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.onCanActivate(isActivate);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; isActivate;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    onCanActivate(canActivate:&lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!canActivate) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.router.navigate([&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;error-role&#39;&lt;/span&gt;, &amp;#123;path: &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path&amp;#125;]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.roleResourceService.clearCache();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;detect-route-changes&quot;&gt;&lt;a href=&quot;#Detect-Route-Changes&quot; class=&quot;headerlink&quot; title=&quot;Detect Route Changes&quot;&gt;&lt;/a&gt;&lt;strong&gt;Detect Route Changes&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Router, NavigationStart, NavigationEnd, NavigationError, NavigationCancel, RoutesRecognized &amp;#125; from &lt;span class=&quot;string&quot;&gt;&#39;@angular/router&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;constructor(router:Router) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  router.events.forEach((event) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(event &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; NavigationStart) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// NavigationEnd&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// NavigationCancel&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// NavigationError&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// RoutesRecognized&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;You can also filter by the given event:&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/add/operator/filter&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;constructor(router:Router) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  router.events&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .filter(event =&amp;gt; event &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; NavigationStart)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe((event:NavigationStart) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// You only receive NavigationStart events&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/angular/angular/issues/11268#issuecomment-244601977&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Using pairwise operator&lt;/a&gt; to get the previous and current event also is an nice idea. &lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;import &#39;rxjs/add/operator/pairwise&#39;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;import &amp;#123;Router&amp;#125; from &#39;@angular/router;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;export class AppComponent &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    constructor(private router: Router) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        this.router.events.pairwise().subscribe((e) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            console.log(e);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Ref&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Rxjs &lt;a href=&quot;http://reactivex.io/rxjs/file/es6/observable/IntervalObservable.js.html#lineNumber9&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IntervalObservable&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/q/401981/2587435&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;When to use query parameters versus matrix parameters?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/q/2048121/2587435&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;URL matrix parameters vs. request parameters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/angular/angular/issues/11268#issuecomment-244601977&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Using pairwise operator&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;Interval-and-Clock-Ticker&quot;&gt;&lt;a href=&quot;#Interval-and-Clock-Ticker&quot; class=&quot;headerlink&quot; title=&quot;Interval and Clock Ticker&quot;&gt;&lt;/a&gt;&lt;strong&gt;Interval and Clock Ticker&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Use &lt;a href=&quot;http://reactivex.io/rxjs/file/es6/observable/IntervalObservable.js.html#lineNumber9&quot;&gt;IntervalObservable&lt;/a&gt; in &lt;code&gt;rxjs&lt;/code&gt; to implement interval in angular 2. &lt;code&gt;Create(period)&lt;/code&gt; is a static method, which creates an Observable that emits sequential numbers every specified interval of time.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; IntervalObservable &amp;#125; from &lt;span class=&quot;string&quot;&gt;&#39;rxjs/observable/IntervalObservable&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Component&lt;/span&gt;(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &lt;span class=&quot;string&quot;&gt;&#39;demo&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    templateUrl: &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;div&amp;gt;&amp;#123;&amp;#123;time | date:&#39;&lt;/span&gt;HH:mm:ss&lt;span class=&quot;string&quot;&gt;&#39;&amp;#125;&amp;#125;&amp;lt;/div&amp;gt;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;export &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Demo&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OnInit&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    time:number = Date.now();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ngOnInit() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        IntervalObservable.create(&lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;).subscribe(() =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.time = Date.now());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://volcanohong.github.com/categories/Angular/"/>
    
    
      <category term="angular2" scheme="http://volcanohong.github.com/tags/angular2/"/>
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>Angular2 Notes IV</title>
    <link href="http://volcanohong.github.com/2017/01/29/angular2-notes-4/"/>
    <id>http://volcanohong.github.com/2017/01/29/angular2-notes-4/</id>
    <published>2017-01-29T09:37:48.000Z</published>
    <updated>2017-03-12T04:33:57.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;shadow-dom&quot;&gt;&lt;a href=&quot;#Shadow-DOM&quot; class=&quot;headerlink&quot; title=&quot;Shadow DOM&quot;&gt;&lt;/a&gt;&lt;strong&gt;Shadow DOM&lt;/strong&gt;&lt;/h2&gt;In fact, Angular doesn’t use native Shadow DOM by default, it uses an emulation. Most browsers simply don’t support Shadow DOM yet, but we should still be able to use the framework. Even better, we can easily tell Angular to use the native Shadow DOM if we want, &lt;a href=&quot;https://blog.thoughtram.io/angular/2015/06/29/shadow-dom-strategies-in-angular2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;View Encapsulation in Angular&lt;/a&gt;. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;View Encapsulation Types&lt;/em&gt;&lt;br&gt;Angular comes with view encapsulation built in, which enables us to use Shadow DOM or even emulate it. There are three view encapsulation types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ViewEncapsulation.None - No Shadow DOM at all. Therefore, also no style encapsulation.&lt;/li&gt;
&lt;li&gt;ViewEncapsulation.Emulated - No Shadow DOM but style encapsulation emulation.&lt;/li&gt;
&lt;li&gt;ViewEncapsulation.Native - Native Shadow DOM with all it’s goodness.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To make that Angular doesn’t use Shadow DOM at all. In case adding some attributes to the style so that the style is not rendered well in the browser.&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123;Component, OnInit, ViewEncapsulation&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &lt;span class=&quot;string&quot;&gt;&#39;app-period&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    templateUrl: &lt;span class=&quot;string&quot;&gt;&#39;./period.component.html&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    encapsulation: ViewEncapsulation.None,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    styleUrls: [&lt;span class=&quot;string&quot;&gt;&#39;./period.component.scss&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;bootstrap-datepicker&quot;&gt;&lt;a href=&quot;#Bootstrap-Datepicker&quot; class=&quot;headerlink&quot; title=&quot;Bootstrap Datepicker&quot;&gt;&lt;/a&gt;&lt;strong&gt;Bootstrap Datepicker&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123;DatePickerModule&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;ng2-datepicker&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123;NKDatetimeModule&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;ng2-datetime/ng2-datetime&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;ng2-datetime/src/vendor/bootstrap-datepicker/bootstrap-datepicker.min.js&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;ng2-datetime/src/vendor/bootstrap-timepicker/bootstrap-timepicker.min.js&#39;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;col-md-3 no-padding&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;datetime&lt;/span&gt; [(&lt;span class=&quot;attr&quot;&gt;ngModel&lt;/span&gt;)]=&lt;span class=&quot;string&quot;&gt;&quot;fromDate&quot;&lt;/span&gt; [&lt;span class=&quot;attr&quot;&gt;timepicker&lt;/span&gt;]=&lt;span class=&quot;string&quot;&gt;&quot;false&quot;&lt;/span&gt; [&lt;span class=&quot;attr&quot;&gt;datepicker&lt;/span&gt;]=&lt;span class=&quot;string&quot;&gt;&quot;fromDateOptions&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;dpFromDate&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;dpFromDate&quot;&lt;/span&gt; (&lt;span class=&quot;attr&quot;&gt;ngModelChange&lt;/span&gt;)=&lt;span class=&quot;string&quot;&gt;&quot;onSelectedDates()&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;datetime&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Example of datepicker options…&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.toDateOptions = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            autoclose: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            assumeNearbyYear: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            format: &lt;span class=&quot;string&quot;&gt;&#39;dd-mm-yyyy&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            language: &lt;span class=&quot;string&quot;&gt;&#39;en&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            todayBtn: &lt;span class=&quot;string&quot;&gt;&#39;linked&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            todayHighlight: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            weekStart: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            icon: &lt;span class=&quot;string&quot;&gt;&#39;fa fa-calendar&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;bootstrap-dropdown-button&quot;&gt;&lt;a href=&quot;#Bootstrap-Dropdown-Button&quot; class=&quot;headerlink&quot; title=&quot;Bootstrap Dropdown Button&quot;&gt;&lt;/a&gt;&lt;strong&gt;Bootstrap Dropdown Button&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; ButtonsModule, DropdownModule &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;ng2-bootstrap&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@NgModule(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    imports: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ButtonsModule.forRoot(),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        DropdownModule.forRoot(),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    providers: ...,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    declarations: ...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;btn-group&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dropdown&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;dropdown-btn-curr&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;btn btn-secondary&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dropdownToggle&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;amp;nbsp; &amp;#123;&amp;#123;currDefault&amp;#125;&amp;#125; &amp;amp;nbsp;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;fa fa-caret-down&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;i&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dropdownMenu&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;role&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;menu&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;aria-labelledby&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;dropdown-btn-curr&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;li&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;role&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;menuitem&quot;&lt;/span&gt; *&lt;span class=&quot;attr&quot;&gt;ngFor&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;let curr of currCodeList&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;a&lt;/span&gt; (&lt;span class=&quot;attr&quot;&gt;click&lt;/span&gt;)=&lt;span class=&quot;string&quot;&gt;&quot;onCurrencySelected(curr)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;dropdown-item&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;#123;&amp;#123;curr&amp;#125;&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;simple-cache-implementation&quot;&gt;&lt;a href=&quot;#Simple-Cache-Implementation&quot; class=&quot;headerlink&quot; title=&quot;Simple Cache Implementation&quot;&gt;&lt;/a&gt;&lt;strong&gt;Simple Cache Implementation&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TopWinnerService&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    pathWinningAmount:string = &lt;span class=&quot;string&quot;&gt;&#39;/winning-amount&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    _listWinningAmount = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//enable cache for winners&#39; list&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private apiService:ApiService) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    getWinningAmount(params:URLSearchParams) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._listWinningAmount == &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;no cache::_listWinningAmount...&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._listWinningAmount = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.query(&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.pathWinningAmount, params)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            .publishReplay(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            .refCount();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._listWinningAmount;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    clearCache() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._listWinningAmount = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;resource-relative-path&quot;&gt;&lt;a href=&quot;#Resource-Relative-Path&quot; class=&quot;headerlink&quot; title=&quot;Resource Relative Path&quot;&gt;&lt;/a&gt;&lt;strong&gt;Resource Relative Path&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;logo = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;../../assets/img/03.png&quot;&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;dynamic-base-href&quot;&gt;&lt;a href=&quot;#Dynamic-Base-Href&quot; class=&quot;headerlink&quot; title=&quot;Dynamic Base Href&quot;&gt;&lt;/a&gt;&lt;strong&gt;Dynamic Base Href&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;base href=&lt;span class=&quot;string&quot;&gt;&quot;./&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;cross-origin-problem&quot;&gt;&lt;a href=&quot;#Cross-Origin-Problem&quot; class=&quot;headerlink&quot; title=&quot;Cross Origin Problem&quot;&gt;&lt;/a&gt;&lt;strong&gt;Cross Origin Problem&lt;/strong&gt;&lt;/h2&gt;Add an @CrossOrigin annotation to @RestController or @RequestMapping annotated handler method in order to enable CORS on it. By default @CrossOrigin allows all origins and the HTTP methods specified in the @RequestMapping annotation, &lt;a href=&quot;http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cors.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CROS Support&lt;/a&gt;. E.g.,&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@CrossOrigin&lt;/span&gt;(origins = &lt;span class=&quot;string&quot;&gt;&quot;http://domain2.com&quot;&lt;/span&gt;, maxAge = &lt;span class=&quot;number&quot;&gt;3600&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Ref&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.thoughtram.io/angular/2015/06/29/shadow-dom-strategies-in-angular2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;View Encapsulation in Angular&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cors.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CROS Support&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;Shadow-DOM&quot;&gt;&lt;a href=&quot;#Shadow-DOM&quot; class=&quot;headerlink&quot; title=&quot;Shadow DOM&quot;&gt;&lt;/a&gt;&lt;strong&gt;Shadow DOM&lt;/strong&gt;&lt;/h2&gt;In fact, Angular doesn’t use native Shadow DOM by default, it uses an emulation. Most browsers simply don’t support Shadow DOM yet, but we should still be able to use the framework. Even better, we can easily tell Angular to use the native Shadow DOM if we want, &lt;a href=&quot;https://blog.thoughtram.io/angular/2015/06/29/shadow-dom-strategies-in-angular2.html&quot;&gt;View Encapsulation in Angular&lt;/a&gt;. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;View Encapsulation Types&lt;/em&gt;&lt;br&gt;Angular comes with view encapsulation built in, which enables us to use Shadow DOM or even emulate it. There are three view encapsulation types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ViewEncapsulation.None - No Shadow DOM at all. Therefore, also no style encapsulation.&lt;/li&gt;
&lt;li&gt;ViewEncapsulation.Emulated - No Shadow DOM but style encapsulation emulation.&lt;/li&gt;
&lt;li&gt;ViewEncapsulation.Native - Native Shadow DOM with all it’s goodness.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To make that Angular doesn’t use Shadow DOM at all. In case adding some attributes to the style so that the style is not rendered well in the browser.&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123;Component, OnInit, ViewEncapsulation&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &lt;span class=&quot;string&quot;&gt;&#39;app-period&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    templateUrl: &lt;span class=&quot;string&quot;&gt;&#39;./period.component.html&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    encapsulation: ViewEncapsulation.None,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    styleUrls: [&lt;span class=&quot;string&quot;&gt;&#39;./period.component.scss&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://volcanohong.github.com/categories/Angular/"/>
    
    
      <category term="angular2" scheme="http://volcanohong.github.com/tags/angular2/"/>
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>Angular2 Notes III</title>
    <link href="http://volcanohong.github.com/2017/01/28/angular2-notes-3/"/>
    <id>http://volcanohong.github.com/2017/01/28/angular2-notes-3/</id>
    <published>2017-01-29T00:14:33.000Z</published>
    <updated>2017-03-12T04:34:40.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;angular-2-notes-modules&quot;&gt;&lt;a href=&quot;#Angular-2-Notes-Modules&quot; class=&quot;headerlink&quot; title=&quot;Angular 2 Notes - Modules&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular 2 Notes - Modules&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;li&gt;&lt;h3 id=&quot;state-management&quot;&gt;&lt;a href=&quot;#State-Management&quot; class=&quot;headerlink&quot; title=&quot;State Management&quot;&gt;&lt;/a&gt;&lt;strong&gt;State Management&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;The Problem With Concurrency&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;  Building components which communicate with each other is a typical task involving state. We frequently have to keep up to date with different Angular components interacting with the same state: when more than one component accesses and modifies that state we call it &lt;code&gt;shared mutable state&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;    
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;keeping the state consistent&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Create a store to manage the state. E.g., the state of Note can be accessed from the store.&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; BehaviorSubject &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/BehaviorSubject&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/Rx&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; interface Note &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  color: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  title: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  value: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  id?: string | number,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  createdAt?: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  updatedAt?: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  userId?: string&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; interface State &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  notes: &lt;span class=&quot;built_in&quot;&gt;Array&lt;/span&gt;&amp;lt;Note&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; defaultState : State = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  notes: []&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; _store = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BehaviorSubject&amp;lt;State&amp;gt;(defaultState);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Store&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  private _store = _store;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  changes = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.asObservable().distinctUntilChanged()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  setState(state: State) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.next(state);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  getState(): State &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.value;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  purge() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.next(defaultState);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Apply a &lt;code&gt;store-helper&lt;/code&gt; service to keep state…&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Store &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;../store&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;StoreHelper&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private store: Store) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  update(prop, state) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123; [prop]: state &amp;#125;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  add(prop, state) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; collection = currentState[prop];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123; [prop]: [state, ...collection] &amp;#125;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  findAndUpdate(prop, state) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; collection = currentState[prop];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123;[prop]: collection.map(item =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (item.id !== state.id) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; item;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, item, state)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;)&amp;#125;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  findAndDelete(prop, id) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; collection = currentState[prop];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123;[prop]: collection.filter(item =&amp;gt; item.id !== id)&amp;#125;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;``&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;` &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Apply the store...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;`&lt;span class=&quot;string&quot;&gt;``&lt;/span&gt;js&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Notes&lt;/span&gt; &lt;/span&gt;&amp;#123;      &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      notes = [];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        private store: Store,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        private noteService: NoteService&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      ) &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#123;   &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.getNotes().subscribe();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// this.store.changes.pluck(&#39;notes&#39;)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//   .subscribe((notes: any) =&amp;gt;  this.notes = notes);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.changes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .map(data =&amp;gt; data.notes)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe(notes =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.notes = notes);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      onCreateNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.createNote(note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// .subscribe(note =&amp;gt; this.notes.push(note));&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      onNoteChecked(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.completeNote(note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// .subscribe(note =&amp;gt; &amp;#123;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//   const i = this.notes.findIndex(localNote =&amp;gt; localNote.id === note.id);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//   this.notes.splice(i, 1);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// &amp;#125;);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;authentication-management&quot;&gt;&lt;a href=&quot;#Authentication-Management&quot; class=&quot;headerlink&quot; title=&quot;Authentication Management&quot;&gt;&lt;/a&gt;&lt;strong&gt;Authentication Management&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Create authentication service, &lt;code&gt;auth.ts&lt;/code&gt;…&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123;CanActivate, Router&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/router&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/Rx&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;AuthService&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CanActivate&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  JWT_KEY: string = &lt;span class=&quot;string&quot;&gt;&#39;retain_token&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  JWT: string = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private router: Router) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  isAuthorized(): boolean &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Boolean&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.JWT);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  canActivate(): boolean &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; canActivate = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.isAuthorized();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.onCanActivate(canActivate);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; canActivate;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  onCanActivate(canActivate: boolean) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!canActivate) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.router.navigate([&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;auth&#39;&lt;/span&gt;]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Add auth control in &lt;code&gt;routes.ts&lt;/code&gt;.&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; RouterModule &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/router&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; ModuleWithProviders &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Main, Notes, About, Auth &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./containers&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; AuthService &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./services&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; routes: ModuleWithProviders = RouterModule.forRoot([&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    path: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    component: Main,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    canActivate: [ AuthService ],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    children: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, component: Notes &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;about&#39;&lt;/span&gt;, component: About &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;auth&#39;&lt;/span&gt;, component: Auth&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;**&#39;&lt;/span&gt;, redirectTo: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;]);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Auth page for example…&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Component &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  selector: &lt;span class=&quot;string&quot;&gt;&#39;auth-container&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  template: &lt;span class=&quot;string&quot;&gt;`     &amp;lt;div class=&quot;auth-container&quot;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;h1&amp;gt;Auth&amp;lt;/h1&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  `&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;) &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Auth&lt;/span&gt; &lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;Angular-2-Notes-Modules&quot;&gt;&lt;a href=&quot;#Angular-2-Notes-Modules&quot; class=&quot;headerlink&quot; title=&quot;Angular 2 Notes - Modules&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular 2 Notes - Modules&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;li&gt;&lt;h3 id=&quot;State-Management&quot;&gt;&lt;a href=&quot;#State-Management&quot; class=&quot;headerlink&quot; title=&quot;State Management&quot;&gt;&lt;/a&gt;&lt;strong&gt;State Management&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;The Problem With Concurrency&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;  Building components which communicate with each other is a typical task involving state. We frequently have to keep up to date with different Angular components interacting with the same state: when more than one component accesses and modifies that state we call it &lt;code&gt;shared mutable state&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://volcanohong.github.com/categories/Angular/"/>
    
    
      <category term="angular2" scheme="http://volcanohong.github.com/tags/angular2/"/>
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>Angular2 Notes II</title>
    <link href="http://volcanohong.github.com/2017/01/04/angular2-notes-2/"/>
    <id>http://volcanohong.github.com/2017/01/04/angular2-notes-2/</id>
    <published>2017-01-05T03:25:27.000Z</published>
    <updated>2017-01-29T22:37:41.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;angular-2-notes-modules&quot;&gt;&lt;a href=&quot;#Angular-2-Notes-Modules&quot; class=&quot;headerlink&quot; title=&quot;Angular 2 Notes - Modules&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular 2 Notes - Modules&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;li&gt;&lt;h3 id=&quot;api-service&quot;&gt;&lt;a href=&quot;#API-Service&quot; class=&quot;headerlink&quot; title=&quot;API Service&quot;&gt;&lt;/a&gt;&lt;strong&gt;API Service&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;First, configure the application to use server communication facilities.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Angular &lt;code&gt;Http&lt;/code&gt; client communicates with the server using a familiar HTTP request/response protocol. The &lt;code&gt;Http&lt;/code&gt; client is one of a family of services in the Angular HTTP library.&lt;/p&gt;
&lt;p&gt;E.g., &lt;code&gt;main.ts&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;import &amp;#123; HttpModule&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/http&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//import &amp;#123; HttpModule, JsonpModule &amp;#125; from &#39;@angular/http&#39;;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; App, providers&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./app&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@NgModule(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    declarations: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        App,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Main&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    providers,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    imports: [BrowserModule, FormsModule, HttpModule], &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    bootstrap: [App]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;em&gt;When importing from the @angular/http module, SystemJS knows how to load services from the Angular HTTP library because the systemjs.config.js file maps to that module name.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;JsonpModule isn’t necessary for plain HTTP.&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;make-a-general-service&quot;&gt;&lt;a href=&quot;#Make-a-General-Service&quot; class=&quot;headerlink&quot; title=&quot;Make a General Service&quot;&gt;&lt;/a&gt;&lt;strong&gt;Make a General Service&lt;/strong&gt;&lt;/h4&gt;E.g., &lt;code&gt;api.ts&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Headers, Http, Response &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/http&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Observable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/Observable&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/Rx&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/add/observable/throw&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ApiService&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  headers: Headers = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Headers(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;application/json&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Accept: &lt;span class=&quot;string&quot;&gt;&#39;application/json&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  api_url: string = &lt;span class=&quot;string&quot;&gt;&#39;http://localhost:3500&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//Http client service is injected the constructor.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private http: Http) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//the response object doesn&#39;t hold the data in a form the app can use directly. &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//we must parse the response data into a JSON object.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  private getJson(response: Response) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; response.json();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//always handle errors&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  private checkForError(response: Response): Response &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (response.status &amp;gt;= &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt; &amp;amp;&amp;amp; response.status &amp;lt; &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; response;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; error = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Error&lt;/span&gt;(response.statusText)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      error[&lt;span class=&quot;string&quot;&gt;&#39;response&#39;&lt;/span&gt;] = response;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.error(error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; error;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//it will return an Observable when the Http client fetched from the server.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//think of an Observable as a stream of events published by some source. &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  get(path: string): Observable&amp;lt;any&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.http.get(&lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;this.api_url&amp;#125;&lt;/span&gt;&lt;span class=&quot;subst&quot;&gt;$&amp;#123;path&amp;#125;&lt;/span&gt;`&lt;/span&gt;, &amp;#123; headers: &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.headers &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.checkForError)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .catch(err =&amp;gt; Observable.throw(err))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.getJson)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  post(path: string, body): Observable&amp;lt;any&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.http.post(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;this.api_url&amp;#125;&lt;/span&gt;&lt;span class=&quot;subst&quot;&gt;$&amp;#123;path&amp;#125;&lt;/span&gt;`&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;JSON&lt;/span&gt;.stringify(body),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#123; headers: &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.headers &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    )&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.checkForError)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .catch(err =&amp;gt; Observable.throw(err))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.getJson)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt;(path: string): Observable&amp;lt;any&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.http.delete(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;this.api_url&amp;#125;&lt;/span&gt;&lt;span class=&quot;subst&quot;&gt;$&amp;#123;path&amp;#125;&lt;/span&gt;`&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#123; headers: &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.headers &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    )&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.checkForError)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .catch(err =&amp;gt; Observable.throw(err))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.getJson)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;In fact, the http.get method returns an Observable of HTTP Responses (Observable&lt;response&gt;) from the RxJS library and map is one of the RxJS operators.&lt;/response&gt;&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Export providers&lt;br&gt;E.g., &lt;code&gt;../index.ts&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; services &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./services&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &amp;#123; App &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./app&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; mapValuesToArray = (obj) =&amp;gt; &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.keys(obj).map(key =&amp;gt; obj[key]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; providers = [  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ...mapValuesToArray(services)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;Export services&lt;br&gt;E.g., &lt;code&gt;../services/index.ts&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &amp;#123; ApiService &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./api&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &amp;#123; NoteService &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./notes&#39;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;implement-a-service&quot;&gt;&lt;a href=&quot;#Implement-a-service&quot; class=&quot;headerlink&quot; title=&quot;Implement a service&quot;&gt;&lt;/a&gt;&lt;strong&gt;Implement a service&lt;/strong&gt;&lt;/h4&gt;E.g., &lt;code&gt;note.ts&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; ApiService &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./api&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/Rx&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NoteService&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  path: string = &lt;span class=&quot;string&quot;&gt;&#39;/notes&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private apiService: ApiService) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  createNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.post(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path, note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  getNotes() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.get(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  completeNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.delete(&lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;this.path&amp;#125;&lt;/span&gt;/&lt;span class=&quot;subst&quot;&gt;$&amp;#123;note.id&amp;#125;&lt;/span&gt;`&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;apply-a-service&quot;&gt;&lt;a href=&quot;#Apply-a-service&quot; class=&quot;headerlink&quot; title=&quot;Apply a service&quot;&gt;&lt;/a&gt;&lt;strong&gt;Apply a service&lt;/strong&gt;&lt;/h4&gt;E.g., &lt;code&gt;notes.ts&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; NoteService &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;../services&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;export &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Notes&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    notes = [];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//inject NoteService to constructor&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private noteService: NoteService) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Although at runtime the component requests heroes immediately after   &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//creation, you don&#39;t call the service&#39;s get method in the component&#39;s &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//constructor. Instead, call it inside the ngOnInit()&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ngOnInit() &amp;#123; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.getNotes()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          .subscribe(res =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.notes = res.data);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	 &lt;span class=&quot;comment&quot;&gt;//golden rule: always delegate data access to a supporting service class.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    onCreateNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.createNote(note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          .subscribe(note =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.notes.push(note));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    onNoteChecked(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.completeNote(note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe(note =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; i = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.notes.findIndex(localNote =&amp;gt; localNote.id === note.id);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.notes.splice(i, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;This is a best practice. Components are easier to test and debug when their constructors are simple, and all real work (especially calling a remote server) is handled in a separate method.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;To listen for events in this stream, subscribe to the Observable (Here, we have translated the obserable to json). These subscriptions specify the actions to take when the web request produces a success event (with the data in the event payload) or a fail event (with the error in the payload).&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;promise-based&quot;&gt;&lt;a href=&quot;#Promise-Based&quot; class=&quot;headerlink&quot; title=&quot;Promise Based&quot;&gt;&lt;/a&gt;&lt;strong&gt;Promise Based&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;getHeroes (): &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;&amp;lt;Hero[]&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.http.get(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.heroesUrl)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  .toPromise()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  .then(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.extractData)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  .catch(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.handleError);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;addHero (name: string): &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;&amp;lt;Hero&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; headers = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Headers(&amp;#123; &lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;application/json&#39;&lt;/span&gt; &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; options = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; RequestOptions(&amp;#123; headers: headers &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.http.post(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.heroesUrl, &amp;#123; name &amp;#125;, options)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             .toPromise()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             .then(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.extractData)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             .catch(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.handleError);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;private extractData(res: Response) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; body = res.json();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; body.data || &amp;#123; &amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;private handleError (error: Response | any) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// In a real world app, we might use a remote logging infrastructure&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; errMsg: string;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (error &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; Response) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; body = error.json() || &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; err = body.error || &lt;span class=&quot;built_in&quot;&gt;JSON&lt;/span&gt;.stringify(body);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    errMsg = &lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;error.status&amp;#125;&lt;/span&gt; - &lt;span class=&quot;subst&quot;&gt;$&amp;#123;error.statusText || &#39;&#39;&amp;#125;&lt;/span&gt; &lt;span class=&quot;subst&quot;&gt;$&amp;#123;err&amp;#125;&lt;/span&gt;`&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    errMsg = error.message ? error.message : error.toString();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.error(errMsg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;.reject(errMsg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;We can follow the promise &lt;code&gt;then(this.extractData).catch(this.handleError)&lt;/code&gt; pattern as in this example.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;While promises may be more familiar, observables have many advantages.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Alternatively, you can call &lt;code&gt;toPromise(success, fail)&lt;/code&gt;. The observable’s map callback moves to the first success parameter and its catch callback to the second fail parameter in this pattern: &lt;code&gt;.toPromise(this.extractData&lt;/code&gt;, this.handleError).&lt;/p&gt;
&lt;p&gt;Also, We have to adjust the calling component to expect a Promise instead of an observable:&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;getHeroes() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.heroService.getHeroes()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   .then(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                     heroes =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.heroes = heroes,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                     error =&amp;gt;  &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.errorMessage = &amp;lt;any&amp;gt;error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;addHero (name: string) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  if (!name) &amp;#123; return; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  this.heroService.addHero(name)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   .then(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                     hero  =&amp;gt; this.heroes.push(hero),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                     error =&amp;gt;  this.errorMessage = &amp;lt;any&amp;gt;error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;The less obvious but critical difference is that these two methods return very different results.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The promise-based &lt;code&gt;then&lt;/code&gt; returns another promise. You can keep chaining more &lt;code&gt;then&lt;/code&gt; and &lt;code&gt;catch&lt;/code&gt; calls, getting a new promise each time.&lt;br&gt;The &lt;code&gt;subscribe&lt;/code&gt; method returns a &lt;code&gt;Subscription&lt;/code&gt;. A &lt;code&gt;Subscription&lt;/code&gt; is not another &lt;code&gt;Observable&lt;/code&gt;. It’s the end of the line for observables. You can’t call map on it or call subscribe again. The &lt;code&gt;Subscription&lt;/code&gt; object has a different purpose, signified by its primary method, &lt;code&gt;unsubscribe&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;observalbe-based&quot;&gt;&lt;a href=&quot;#Observalbe-Based&quot; class=&quot;headerlink&quot; title=&quot;Observalbe Based*&quot;&gt;&lt;/a&gt;&lt;strong&gt;Observalbe Based*&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Concept&lt;/strong&gt;&lt;br&gt;&lt;code&gt;Observable&lt;/code&gt; in short addresses asynchronous processing and events. Comparing to &lt;code&gt;promise&lt;/code&gt;, it can be described as &lt;code&gt;observable&lt;/code&gt; = &lt;code&gt;promise&lt;/code&gt; + events.&lt;/p&gt;
&lt;p&gt;What is great with &lt;code&gt;observables&lt;/code&gt; is that they are &lt;em&gt;lazy&lt;/em&gt;. &lt;code&gt;Observables&lt;/code&gt; can be canceled and you can apply some operators in them (like &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;filter&lt;/code&gt;, …). This allows to handle asynchronous things in a very flexible way.&lt;/p&gt;
&lt;p&gt;A great sample describing the strong power of &lt;code&gt;observables&lt;/code&gt; is the way to connect a filter input to a corresponding filtered list. When the user enters characters, the list is refreshed. &lt;code&gt;Observables&lt;/code&gt; handle corresponding AJAX requests and cancel previous in progress requests if another one is triggered by new value in the input. E.g.,&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.textValue.valueChanges &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .debounceTime(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;) &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .switchMap(data =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.httpService.getListValues(data)) &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(data =&amp;gt; &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;new list values&#39;&lt;/span&gt;, data));&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;In action&lt;/strong&gt; &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Manage the observable by your own. In this case, call the &lt;code&gt;subscribe&lt;/code&gt; method on the observable and assign the result into an attribute of the component. Then use this attribute in the view to iterate over the collection:&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  template: &lt;span class=&quot;string&quot;&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;h1&amp;gt;My Friends&amp;lt;/h1&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;ul&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;li *ngFor=&quot;#frnd of result&quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&amp;#123;frnd.name&amp;#125;&amp;#125; is &amp;#123;&amp;#123;frnd.age&amp;#125;&amp;#125; years old.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;/li&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/ul&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  `,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  directive:[CORE_DIRECTIVES]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FriendsList&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;implement&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OnInit&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;OnDestroy&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  result:&lt;span class=&quot;built_in&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;&amp;gt;; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(http: Http) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ngOnInit() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.friendsObservable = http.get(&lt;span class=&quot;string&quot;&gt;&#39;friends.json&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  .map(response =&amp;gt; response.json())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  .subscribe(result =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.result = result);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   ngOnDestroy() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.friendsObservable.dispose();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Returns from both get and map methods are the observable not the result (in the same way than with promises).&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Manage the observable by the Angular template. You can also use the a pipe to implicitly manage the observable. In this case, there is no need to explicitly call the subscribe method.&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  template: &lt;span class=&quot;string&quot;&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;h1&amp;gt;My Friends&amp;lt;/h1&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;ul&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;li *ngFor=&quot;#frnd of (result | async)&quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&amp;#123;frnd.name&amp;#125;&amp;#125; is &amp;#123;&amp;#123;frnd.age&amp;#125;&amp;#125; years old.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;/li&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/ul&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  `,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  directive:[CORE_DIRECTIVES]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FriendsList&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;implement&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OnInit&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  result:&lt;span class=&quot;built_in&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;&amp;gt;; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(http: Http) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ngOnInit() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.result = http.get(&lt;span class=&quot;string&quot;&gt;&#39;friends.json&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  .map(response =&amp;gt; response.json());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Note that observables are lazy. So the corresponding HTTP request will be only called once when a listener attached on it is using the subscribe method.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;map&lt;/code&gt; method is used to extract the JSON content from the response and use it in the observable processing.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;state-management&quot;&gt;&lt;a href=&quot;#State-Management&quot; class=&quot;headerlink&quot; title=&quot;State Management&quot;&gt;&lt;/a&gt;&lt;strong&gt;State Management&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;make-a-store&quot;&gt;&lt;a href=&quot;#Make-a-Store&quot; class=&quot;headerlink&quot; title=&quot;Make a Store&quot;&gt;&lt;/a&gt;&lt;strong&gt;Make a Store&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;e.g., &lt;code&gt;store.ts&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; BehaviorSubject &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/BehaviorSubject&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;rxjs/Rx&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; interface Note &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  color: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  title: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  value: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  id?: string | number,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  createdAt?: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  updatedAt?: string,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  userId?: string&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; interface State &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  notes: &lt;span class=&quot;built_in&quot;&gt;Array&lt;/span&gt;&amp;lt;Note&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; defaultState : State = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  notes: []&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; _store = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BehaviorSubject&amp;lt;State&amp;gt;(defaultState);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Store&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  private _store = _store;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  changes = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.asObservable().distinctUntilChanged()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  setState(state: State) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.next(state);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  getState(): State &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.value;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  purge() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._store.next(defaultState);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;make-a-store-helper&quot;&gt;&lt;a href=&quot;#Make-a-Store-Helper&quot; class=&quot;headerlink&quot; title=&quot;Make a Store-Helper&quot;&gt;&lt;/a&gt;&lt;strong&gt;Make a Store-Helper&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;e.g., &lt;code&gt;store-helper.ts&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Injectable &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Store &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;../store&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;StoreHelper&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(private store: Store) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  update(prop, state) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123; [prop]: state &amp;#125;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  add(prop, state) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; collection = currentState[prop];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123; [prop]: [state, ...collection] &amp;#125;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  findAndUpdate(prop, state) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; collection = currentState[prop];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123;[prop]: collection.map(item =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (item.id !== state.id) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; item;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, item, state)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;)&amp;#125;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  findAndDelete(prop, id) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; currentState = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.getState();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; collection = currentState[prop];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.setState(&lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(&amp;#123;&amp;#125;, currentState, &amp;#123;[prop]: collection.filter(item =&amp;gt; item.id !== id)&amp;#125;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;implement-a-store&quot;&gt;&lt;a href=&quot;#Implement-a-Store&quot; class=&quot;headerlink&quot; title=&quot;Implement a Store&quot;&gt;&lt;/a&gt;&lt;strong&gt;Implement a Store&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In container &lt;code&gt;note.ts&lt;/code&gt;, &lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Store &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;../store&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Notes&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OnDestroy&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      notes = [];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        private store: Store,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        private noteService: NoteService&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      )&amp;#123;   &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.getNotes().subscribe();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// this.store.changes.pluck(&#39;notes&#39;)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//   .subscribe((notes: any) =&amp;gt;  this.notes = notes);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		 	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.store.changes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .map(data =&amp;gt; data.notes)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe(notes =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.notes = notes);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      onCreateNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.createNote(note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// .subscribe(note =&amp;gt; this.notes.push(note));&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      onNoteChecked(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.noteService.completeNote(note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .subscribe();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// .subscribe(note =&amp;gt; &amp;#123;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//   const i = this.notes.findIndex(localNote =&amp;gt; localNote.id === note.id);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//   this.notes.splice(i, 1);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// &amp;#125;);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;In service &lt;code&gt;note.ts&lt;/code&gt;, keep the store up-to-date.&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; StoreHelper &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./store-helper&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Injectable()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NoteService&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  path: string = &lt;span class=&quot;string&quot;&gt;&#39;/notes&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    private apiService: ApiService,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    private storeHelper: StoreHelper&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ) &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  createNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.post(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path, note)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .do(savedNote =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.storeHelper.add(&lt;span class=&quot;string&quot;&gt;&#39;notes&#39;&lt;/span&gt;, savedNote))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  getNotes() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.get(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.path)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .do(res =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.storeHelper.update(&lt;span class=&quot;string&quot;&gt;&#39;notes&#39;&lt;/span&gt;, res.data));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  completeNote(note) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.apiService.delete(&lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;this.path&amp;#125;&lt;/span&gt;/&lt;span class=&quot;subst&quot;&gt;$&amp;#123;note.id&amp;#125;&lt;/span&gt;`&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .do(res =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.storeHelper.findAndDelete(&lt;span class=&quot;string&quot;&gt;&#39;notes&#39;&lt;/span&gt;, res.id));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Ref:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://angular.io/docs/ts/latest/guide/server-communication.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;angular2 http client&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;Angular-2-Notes-Modules&quot;&gt;&lt;a href=&quot;#Angular-2-Notes-Modules&quot; class=&quot;headerlink&quot; title=&quot;Angular 2 Notes - Modules&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular 2 Notes - Modules&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;li&gt;&lt;h3 id=&quot;API-Service&quot;&gt;&lt;a href=&quot;#API-Service&quot; class=&quot;headerlink&quot; title=&quot;API Service&quot;&gt;&lt;/a&gt;&lt;strong&gt;API Service&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;First, configure the application to use server communication facilities.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Angular &lt;code&gt;Http&lt;/code&gt; client communicates with the server using a familiar HTTP request/response protocol. The &lt;code&gt;Http&lt;/code&gt; client is one of a family of services in the Angular HTTP library.&lt;/p&gt;
&lt;p&gt;E.g., &lt;code&gt;main.ts&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;import &amp;#123; HttpModule&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/http&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//import &amp;#123; HttpModule, JsonpModule &amp;#125; from &#39;@angular/http&#39;;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; App, providers&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./app&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@NgModule(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    declarations: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        App,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Main&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    providers,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    imports: [BrowserModule, FormsModule, HttpModule], &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    bootstrap: [App]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://volcanohong.github.com/categories/Angular/"/>
    
    
      <category term="angular2" scheme="http://volcanohong.github.com/tags/angular2/"/>
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>Angular Datatable Notes</title>
    <link href="http://volcanohong.github.com/2017/01/01/angular-datatable/"/>
    <id>http://volcanohong.github.com/2017/01/01/angular-datatable/</id>
    <published>2017-01-01T18:50:00.000Z</published>
    <updated>2017-03-12T04:36:07.000Z</updated>
    
    <content type="html">&lt;p&gt;Recently, I am developing Apps by using angular datatables.&lt;/p&gt;
&lt;p&gt;The followings are some issues or note that I have to record.&lt;/p&gt;
&lt;h2 id=&quot;datatable-options&quot;&gt;&lt;a href=&quot;#Datatable-Options&quot; class=&quot;headerlink&quot; title=&quot;Datatable Options&quot;&gt;&lt;/a&gt;&lt;strong&gt;Datatable Options&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;Selected datatable options…&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vm.dtOptions = DTOptionsBuilder.newOptions()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withDOM(&lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;&quot;html5buttons&quot;B&amp;gt;lTfgitp&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;deferRender&#39;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// deferred rendering for additional speed of initialisation&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;deferLoading&#39;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// delay the loading of server-side data until second draw&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;processing&#39;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// add processing indicator&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// change the options in the page length select list.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;lengthMenu&#39;&lt;/span&gt;, [[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;ALL&#39;&lt;/span&gt;]])&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;aoColumnDefs&#39;&lt;/span&gt;, [&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;bVisible&quot;&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;aTargets&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&amp;#125;]) &lt;span class=&quot;comment&quot;&gt;//could affect search function&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;scrollX&#39;, &#39;600px&#39;) // add horizontal scroll&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;scrollY&#39;, &#39;500px&#39;) // add vertical scroll &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;scrollCollapse&#39;, true) // table collapse on less data&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;paging&#39;, false) // disable pagination&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;searchCols&#39;, [null, null, null, &amp;#123; &quot;search&quot;: &#39;&#39;&amp;#125;]) // define an initial search for individual columns.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;aoColumnDefs&#39;&lt;/span&gt;, [&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;bVisible&quot;&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;aTargets&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&amp;#125;]) &lt;span class=&quot;comment&quot;&gt;//enable or disable the display of this column&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;More options and instruction can refer &lt;a href=&quot;https://datatables.net/reference/option/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;datatable options&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;reloading-datatable&quot;&gt;&lt;a href=&quot;#Reloading-Datatable&quot; class=&quot;headerlink&quot; title=&quot;Reloading Datatable&quot;&gt;&lt;/a&gt;&lt;strong&gt;Reloading Datatable&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;Calling &lt;code&gt;dtInstance..rerender()&lt;/code&gt;…&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;datatable&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ng&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dt-options&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ps.dtOptions&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dt-instance&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ps.dtInstance&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;table&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$scope.reloadData = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//call api and get some data&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            $scope.$apply(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//  vm.dtInstance.rerender();&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                $scope.dtInstance._renderer.rerender();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;create-a-new-filter&quot;&gt;&lt;a href=&quot;#Create-a-New-Filter&quot; class=&quot;headerlink&quot; title=&quot;Create a New Filter&quot;&gt;&lt;/a&gt;&lt;strong&gt;Create a New Filter&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;Create a new filter for datatable by calling function &lt;code&gt;$.fn.dataTableExt.afnFiltering.push(function (oSettings, aData, iDataIndex) {}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then, redraw the table, &lt;code&gt;dtInstance.dataTable.fnDraw()&lt;/code&gt;, to apply the filter.&lt;/p&gt;
&lt;p&gt;For example:&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vm.reloadDataByFilter = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        $.fn.dataTableExt.afnFiltering.push(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;oSettings, aData, iDataIndex&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;// `aData` returns current data array in the table   &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;           &amp;#123; &lt;span class=&quot;comment&quot;&gt;// some logic here...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; val = aData.slice(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; res = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            angular.forEach(val, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;v, k&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                v = &lt;span class=&quot;built_in&quot;&gt;Number&lt;/span&gt;(v.replace(&lt;span class=&quot;regexp&quot;&gt;/[^0-9\.]+/g&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)); &lt;span class=&quot;comment&quot;&gt;//remove currency symbol&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                res = vm.checkValue(v, aData[&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;], aData[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]) || res;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (res) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; res;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; res;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;           &amp;#125;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        vm.dtInstance.dataTable.fnDraw();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;missing-buttons-on-data-change&quot;&gt;&lt;a href=&quot;#Missing-Buttons-on-Data-Change&quot; class=&quot;headerlink&quot; title=&quot;Missing Buttons on Data Change&quot;&gt;&lt;/a&gt;&lt;strong&gt;Missing Buttons on Data Change&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;%--angular-datatables - v0&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;--%&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;../dataTables/datatables.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;script src=&lt;span class=&quot;string&quot;&gt;&quot;../dataTables/angular-datatables.min.js&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;script src=&lt;span class=&quot;string&quot;&gt;&quot;../dataTables/angular-datatables.buttons.min.js&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//datatable controller &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$scope.dtOptions = DTOptionsBuilder.newOptions()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .withDOM(&lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;&quot;html5buttons&quot;B&amp;gt;lTfgitp&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .withButtons([&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123;extend: &lt;span class=&quot;string&quot;&gt;&#39;copy&#39;&lt;/span&gt;&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123;extend: &lt;span class=&quot;string&quot;&gt;&#39;csv&#39;&lt;/span&gt;&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                extend: &lt;span class=&quot;string&quot;&gt;&#39;print&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                customize: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;win&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    $(win.document.body).addClass(&lt;span class=&quot;string&quot;&gt;&#39;white-bg&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    $(win.document.body).css(&lt;span class=&quot;string&quot;&gt;&#39;font-size&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;10px&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    $(win.document.body).find(&lt;span class=&quot;string&quot;&gt;&#39;table&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        .addClass(&lt;span class=&quot;string&quot;&gt;&#39;compact&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        .css(&lt;span class=&quot;string&quot;&gt;&#39;font-size&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;inherit&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ]);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;When the data is changed, the buttons such as ‘Copy’, ‘Print’ and ‘CSV’ from datatable-buttons plugin disappear.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cause:&lt;/strong&gt; It seems the datatable dose not redraw the options like button plugin after data change. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Solution:&lt;/strong&gt;&lt;br&gt;We can manually add button-options by using angular-datatable &lt;a href=&quot;https://datatables.net/reference/option/drawCallback&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;drawCallback function&lt;/a&gt;, where the function is called every time DataTables performs a draw.&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; buttonsOpt = [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            text: &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;i class=&quot;fa fa-copy&quot;&amp;gt;&amp;lt;/i&amp;gt;&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            extend: &lt;span class=&quot;string&quot;&gt;&#39;copy&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            text: &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;i class=&quot;fa fa-file-text-o&quot;&amp;gt;&amp;lt;/i&amp;gt;&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            extend: &lt;span class=&quot;string&quot;&gt;&#39;csv&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vm.dtOptions = DTOptionsBuilder.newOptions()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withDOM(&lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;&quot;html5buttons&quot;B&amp;gt;lTfgitp&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withButtons(buttonsOpt.slice());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vm.dtOptions.drawCallback = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; api = $(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).DataTable();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; $.fn.dataTable.Buttons(api, &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            buttons: buttonsOpt.slice()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        $(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).parent().find(&lt;span class=&quot;string&quot;&gt;&#39;.dt-buttons&#39;&lt;/span&gt;).replaceWith(api.buttons().container());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Ref:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://datatables.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;datatables&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Recently, I am developing Apps by using angular datatables.&lt;/p&gt;
&lt;p&gt;The followings are some issues or note that I have to record.&lt;/p&gt;
&lt;h2 id=&quot;Datatable-Options&quot;&gt;&lt;a href=&quot;#Datatable-Options&quot; class=&quot;headerlink&quot; title=&quot;Datatable Options&quot;&gt;&lt;/a&gt;&lt;strong&gt;Datatable Options&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;Selected datatable options…&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vm.dtOptions = DTOptionsBuilder.newOptions()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withDOM(&lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;&quot;html5buttons&quot;B&amp;gt;lTfgitp&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;deferRender&#39;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// deferred rendering for additional speed of initialisation&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;deferLoading&#39;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// delay the loading of server-side data until second draw&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;processing&#39;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// add processing indicator&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// change the options in the page length select list.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;lengthMenu&#39;&lt;/span&gt;, [[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;ALL&#39;&lt;/span&gt;]])&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;aoColumnDefs&#39;&lt;/span&gt;, [&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;bVisible&quot;&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;aTargets&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&amp;#125;]) &lt;span class=&quot;comment&quot;&gt;//could affect search function&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;scrollX&#39;, &#39;600px&#39;) // add horizontal scroll&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;scrollY&#39;, &#39;500px&#39;) // add vertical scroll &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;scrollCollapse&#39;, true) // table collapse on less data&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;paging&#39;, false) // disable pagination&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// .withOption(&#39;searchCols&#39;, [null, null, null, &amp;#123; &quot;search&quot;: &#39;&#39;&amp;#125;]) // define an initial search for individual columns.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .withOption(&lt;span class=&quot;string&quot;&gt;&#39;aoColumnDefs&#39;&lt;/span&gt;, [&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;bVisible&quot;&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;aTargets&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&amp;#125;]) &lt;span class=&quot;comment&quot;&gt;//enable or disable the display of this column&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://volcanohong.github.com/categories/Javascript/"/>
    
    
      <category term="datatable" scheme="http://volcanohong.github.com/tags/datatable/"/>
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="angular" scheme="http://volcanohong.github.com/tags/angular/"/>
    
  </entry>
  
  <entry>
    <title>Jhipster MicroService</title>
    <link href="http://volcanohong.github.com/2016/12/18/jhipster-microservice/"/>
    <id>http://volcanohong.github.com/2016/12/18/jhipster-microservice/</id>
    <published>2016-12-18T20:16:51.000Z</published>
    <updated>2017-03-12T04:36:25.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;introduction-of-jhipster-ms&quot;&gt;&lt;a href=&quot;#Introduction-of-JHipster-MS&quot; class=&quot;headerlink&quot; title=&quot;Introduction of JHipster MS&quot;&gt;&lt;/a&gt;&lt;strong&gt;Introduction of JHipster MS&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;JHipster Registry&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Create Microservice&lt;/strong&gt;&lt;br&gt; a. &lt;strong&gt;Microservice: Job App&lt;/strong&gt;&lt;br&gt; b. &lt;strong&gt;Microservice: Gateway App&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Security&lt;/strong&gt;&lt;br&gt; a. &lt;strong&gt;JWT (JSON Web Token)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Access Control&lt;/strong&gt;&lt;br&gt; a. &lt;strong&gt;Microservice - Job App API&lt;/strong&gt;&lt;br&gt; b. &lt;strong&gt;Microservice - Gateway App API&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;


	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;/content/pdf/JHipsterMicroservice-181216.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
	&lt;/div&gt;


</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;introduction-of-jhipster-ms&quot;&gt;&lt;a href=&quot;#Introduction-of-JHipster-MS&quot; class=&quot;headerlink&quot; title=&quot;Introduction of JHipster MS&quot;&gt;
    
    </summary>
    
      <category term="Framework" scheme="http://volcanohong.github.com/categories/Framework/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="angular" scheme="http://volcanohong.github.com/tags/angular/"/>
    
      <category term="framework" scheme="http://volcanohong.github.com/tags/framework/"/>
    
      <category term="jhipster" scheme="http://volcanohong.github.com/tags/jhipster/"/>
    
      <category term="microservice" scheme="http://volcanohong.github.com/tags/microservice/"/>
    
  </entry>
  
  <entry>
    <title>Firebase Cloud Messaging Notification</title>
    <link href="http://volcanohong.github.com/2016/12/10/fcm-notification/"/>
    <id>http://volcanohong.github.com/2016/12/10/fcm-notification/</id>
    <published>2016-12-10T20:16:51.000Z</published>
    <updated>2016-12-18T20:51:00.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;integration-of-google-fcm-notification&quot;&gt;&lt;a href=&quot;#Integration-of-Google-FCM-Notification&quot; class=&quot;headerlink&quot; title=&quot;Integration of Google FCM Notification&quot;&gt;&lt;/a&gt;&lt;strong&gt;Integration of Google FCM Notification&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Introduction&lt;/strong&gt;&lt;br&gt; a. &lt;strong&gt;Key Capability&lt;/strong&gt;&lt;br&gt; b. &lt;strong&gt;FCM Message Type&lt;/strong&gt;&lt;br&gt; c. &lt;strong&gt;Implementation Path&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Create FCM Project&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Server Side Implementation&lt;/strong&gt;&lt;br&gt; a. &lt;strong&gt;Server Coding&lt;/strong&gt;&lt;br&gt; b. &lt;strong&gt;Server API Test&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;


	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;/content/pdf/FirebaseCloudMessagingNotification-181216.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
	&lt;/div&gt;



</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;integration-of-google-fcm-notification&quot;&gt;&lt;a href=&quot;#Integration-of-Google-FCM-Notification&quot; class=&quot;headerlink&quot; title=&quot;Integra
    
    </summary>
    
      <category term="Java" scheme="http://volcanohong.github.com/categories/Java/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="google" scheme="http://volcanohong.github.com/tags/google/"/>
    
      <category term="fcm" scheme="http://volcanohong.github.com/tags/fcm/"/>
    
      <category term="notification" scheme="http://volcanohong.github.com/tags/notification/"/>
    
  </entry>
  
  <entry>
    <title>Jhipster Project</title>
    <link href="http://volcanohong.github.com/2016/11/18/jhipster-project/"/>
    <id>http://volcanohong.github.com/2016/11/18/jhipster-project/</id>
    <published>2016-11-19T05:37:31.000Z</published>
    <updated>2016-12-18T20:15:20.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;security-configuration&quot;&gt;&lt;a href=&quot;#Security-Configuration&quot; class=&quot;headerlink&quot; title=&quot;Security Configuration&quot;&gt;&lt;/a&gt;&lt;strong&gt;Security Configuration&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;jhipster-security&quot;&gt;&lt;a href=&quot;#JHipster-Security&quot; class=&quot;headerlink&quot; title=&quot;JHipster Security&quot;&gt;&lt;/a&gt;&lt;strong&gt;JHipster Security&lt;/strong&gt;&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;To use Spring Security with a Single Web Page Application, like the ones generated by JHipster, you need Ajax login/logout/error views. We have configured Spring Security in order to use those views correctly, and of course we generate all the JavaScript and HTML code for you.&lt;br&gt;By default, JHipster comes with 4 different users:&lt;br&gt;“system”, who is mainly used by our audit logs, when something is done automatically&lt;br&gt;“anonymousUser”, who is given to anonymous users when they do an action&lt;br&gt;“user”, who is a normal user with “ROLE_USER” authorization. His default password is “user”&lt;br&gt;“admin”, who is an admin user with “ROLE_USER” and “ROLE_ADMIN” authorizations. His default password is “admin”&lt;br&gt;For security reasons, you should change those default passwords.&lt;br&gt;More info are provided here: &lt;a href=&quot;https://jhipster.github.io/security/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://jhipster.github.io/security/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;role-management&quot;&gt;&lt;a href=&quot;#Role-Management&quot; class=&quot;headerlink&quot; title=&quot;Role Management&quot;&gt;&lt;/a&gt;&lt;strong&gt;Role Management&lt;/strong&gt;&lt;/h4&gt;When adding a new ROLE, consider the following steps,&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;Update role data in DB, In &lt;code&gt;src/main/resources/config/liquibase&lt;/code&gt; directory, add new role to &lt;code&gt;authorities.cs&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Update &lt;code&gt;AuthoritiesConstants.java&lt;/code&gt;, add new role constant, and the static method if you need.&lt;/li&gt;
&lt;li&gt;Change the corresponding security control and your logic.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;java-security-configuration&quot;&gt;&lt;a href=&quot;#Java-Security-Configuration&quot; class=&quot;headerlink&quot; title=&quot;Java Security Configuration&quot;&gt;&lt;/a&gt;&lt;strong&gt;Java Security Configuration&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Project level &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;In &lt;code&gt;SecurityConfiguration.java&lt;/code&gt;, define WebSecurity (e.g., specify which api is an exemption) and HttpSecurity&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;configure&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(WebSecurity web)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    web.ignoring()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .antMatchers(&lt;span class=&quot;string&quot;&gt;&quot;/swagger-ui/index.html&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .antMatchers(&lt;span class=&quot;string&quot;&gt;&quot;/api/register&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .antMatchers(&lt;span class=&quot;string&quot;&gt;&quot;/api/activate&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In &lt;code&gt;OAuth2ServerConfiguration.java&lt;/code&gt;, prevent an API from OAuth2 authentication.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Object level&lt;br&gt;Allow a particular role to access an API.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@RestController&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@RequestMapping&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;/api&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Secured&lt;/span&gt;(AuthoritiesConstants.USER)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;IpsUserProfileResource&lt;/span&gt; &lt;/span&gt;&amp;#123;...&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Method level&lt;br&gt;Check whether or not the current login user has a particular role.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!SecurityUtils.isUserInRole(AuthoritiesConstants.ADMIN)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;angular-security-configuration&quot;&gt;&lt;a href=&quot;#Angular-Security-Configuration&quot; class=&quot;headerlink&quot; title=&quot;Angular Security Configuration&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular Security Configuration&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;Some recommendation here (need explore more and the differences…) &lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;has-role&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ROLE_ADMIN&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;has-authority&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ROLE_ADMIN&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;h3 id=&quot;more-features&quot;&gt;&lt;a href=&quot;#More-Features&quot; class=&quot;headerlink&quot; title=&quot;More Features&quot;&gt;&lt;/a&gt;&lt;strong&gt;More Features&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;oauth2-authentication&quot;&gt;&lt;a href=&quot;#OAuth2-Authentication&quot; class=&quot;headerlink&quot; title=&quot;OAuth2 Authentication&quot;&gt;&lt;/a&gt;&lt;strong&gt;OAuth2 Authentication&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;OAuth2 is a stateless security mechanism, so you might prefer it if you want to scale your application across several machines. Spring Security provides an OAuth2 implementation, which we have configured for you.&lt;br&gt;The biggest issue with OAuth2 is that requires to have several database tables in order to store its security tokens. If you are using an SQL database, we provide the necessary Liquibase changlog so that those tables are automatically created for you.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;jwt-authentication&quot;&gt;&lt;a href=&quot;#JWT-authentication&quot; class=&quot;headerlink&quot; title=&quot;JWT authentication&quot;&gt;&lt;/a&gt;&lt;strong&gt;JWT authentication&lt;/strong&gt;&lt;/h4&gt;JSON Web Token (JWT) authentication, like OAuth2, is a stateless security mechanism, so it’s another good option if you want to scale on several different servers.&lt;br&gt;This authentication mechanism doesn’t exist by default with Spring Security, it’s a JHipster-specific integration of the Java JWT project. It is easier to use and implement than OAuth2, as it does not require a persistence mechanism, so it works on all SQL and NoSQL options.&lt;br&gt;This solution uses a secure token that holds the user’s login name and authorities. As the token is signed, it cannot be altered by a user.&lt;br&gt;The secret key should be configured in the application.yml file, as the jhipster.security.authentication.jwt.secret property.&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;http-session-authentication&quot;&gt;&lt;a href=&quot;#HTTP-Session-Authentication&quot; class=&quot;headerlink&quot; title=&quot;HTTP Session Authentication&quot;&gt;&lt;/a&gt;&lt;strong&gt;HTTP Session Authentication&lt;/strong&gt;&lt;/h4&gt;This is the “classical” Spring Security authentication mechanism, but we have improved it quite significantly. It uses the HTTP Session, so it is a stateful mechanism: if you plan to scale your application on multiple servers, you need to have a load balancer with sticky sessions so that each user stays on the same server.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Improved remember-me mechanism&lt;/strong&gt;&lt;br&gt;We have modified the Spring Security remember-me mechanism so that you have a unique token, that is stored in your database (SQL or NoSQL database, depending on your choice during generation!). We also store more information than the standard implementation, so you have a better understanding of where those tokens come from: IP address, browser, date… And we generate a complete administration screen, so that you can invalidate sessions, for example if you forgot to log out on another computer.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cookie theft protection&lt;/strong&gt;&lt;br&gt;We have added a very complete cookie theft protection mechanism: we store your security information in a cookie, as well as in the database, and each time a user logs in we modify those values and check if they have been altered. That way, if a user ever steals your cookie, he will be able to use only once, at most.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CSRF protection&lt;/strong&gt;&lt;br&gt;Spring Security and AngularJS both have CSRF protection out-of-the-box, but unfortunately they don’t use the same cookies or HTTP headers! In practice, you have in fact no protection at all for CSRF attacks. Of course, we re-configure both tools so that they correctly work together.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;social-login&quot;&gt;&lt;a href=&quot;#Social-Login&quot; class=&quot;headerlink&quot; title=&quot;Social Login&quot;&gt;&lt;/a&gt;&lt;strong&gt;Social Login&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;JHipster provide “social login”, using Spring Social, so users can connect to your application using their Google, Facebook or Twitter authentication. This is configured using Sping Boot’s starter modules.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;h3 id=&quot;db-management&quot;&gt;&lt;a href=&quot;#DB-Management&quot; class=&quot;headerlink&quot; title=&quot;DB Management&quot;&gt;&lt;/a&gt;&lt;strong&gt;DB Management&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;update-db-manually&quot;&gt;&lt;a href=&quot;#Update-DB-Manually&quot; class=&quot;headerlink&quot; title=&quot;Update DB Manually&quot;&gt;&lt;/a&gt;&lt;strong&gt;Update DB Manually&lt;/strong&gt;&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;Database updates by manually editing the change log&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;  If you prefer (or need) to do a database update manually, here is the development workflow:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;Modify your JPA entity (add a field, a relationship, etc.)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;change log&lt;/code&gt; in your &lt;code&gt;src/main/resources/config/liquibase/changelog&lt;/code&gt; directory. The files in that directory are prefixed by their creation date (in &lt;code&gt;yyyyMMddHHmmss&lt;/code&gt; format), and then have a title describing what they do. For example, &lt;code&gt;20141006152300_added_price_to_product.xml&lt;/code&gt; is a good name.&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;databaseChangeLog&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   &lt;span class=&quot;attr&quot;&gt;xmlns:ext&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   &lt;span class=&quot;attr&quot;&gt;xmlns:xsi&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   &lt;span class=&quot;attr&quot;&gt;xsi:schemaLocation&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;changeSet&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;author&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;volcanohong (generated)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;1481426741244-1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;addColumn&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tableName&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;loyalty_scheme&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;column&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;created_date&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;timestamp&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;addColumn&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;changeSet&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;changeSet&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;author&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;volcanohong (generated)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;1481426741244-2&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;addColumn&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tableName&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;loyalty_scheme&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;column&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;last_modified_date&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;timestamp&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;addColumn&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;changeSet&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;databaseChangeLog&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add this “change log” file in your &lt;code&gt;src/main/resources/config/liquibase/master.xml&lt;/code&gt; file, so it is applied the next time you run your application&lt;br&gt;More information for using &lt;a href=&quot;http://www.liquibase.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Liquibase&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; that in &lt;code&gt;pom.xml&lt;/code&gt;, liquibase plugin configuration needs to be updated accordingly.&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plugin&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.liquibase&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;liquibase-maven-plugin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;$&amp;#123;liquibase.version&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependencies&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.javassist&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;javassist&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;3.18.2-GA&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.liquibase.ext&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;liquibase-hibernate4&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;$&amp;#123;liquibase-hibernate4.version&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-data-jpa&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;$&amp;#123;project.parent.version&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependencies&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;configuration&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;changeLogFile&amp;gt;src/main/resources/config/liquibase/master.xml&amp;lt;/changeLogFile&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;diffChangeLogFile&amp;gt;src/main/resources/config/liquibase/changelog/$&amp;#123;maven.build.timestamp&amp;#125;_changelog.xml&amp;lt;/diffChangeLogFile&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;driver&amp;gt;org.h2.Driver&amp;lt;/driver&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;url&amp;gt;jdbc:h2:file:./target/h2db/db/xxxisg&amp;lt;/url&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;defaultSchemaName /&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;username&amp;gt;xxxISG&amp;lt;/username&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;password /&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;referenceUrl&amp;gt;hibernate:spring:com.xxx.isg.domain?dialect=org.hibernate.dialect.H2Dialect&amp;amp;amp;hibernate.ejb.naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringNamingStrategy&amp;lt;/referenceUrl&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;verbose&amp;gt;true&amp;lt;/verbose&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;logging&amp;gt;debug&amp;lt;/logging&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;diffExcludeObjects&amp;gt;oauth_access_token, oauth_approvals, oauth_client_details, oauth_client_token, oauth_code, oauth_refresh_token&amp;lt;/diffExcludeObjects&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;/configuration&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;changeLogFile&lt;/span&gt;&amp;gt;&lt;/span&gt;src/main/resources/config/liquibase/master.xml&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;changeLogFile&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;diffChangeLogFile&lt;/span&gt;&amp;gt;&lt;/span&gt;src/main/resources/config/liquibase/changelog/$&amp;#123;maven.build.timestamp&amp;#125;_changelog.xml&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;diffChangeLogFile&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;driver&lt;/span&gt;&amp;gt;&lt;/span&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;driver&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;jdbc:sqlserver://xxx.xxx.net:1433;databaseName=xxx_iscango&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;defaultSchemaName&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;username&lt;/span&gt;&amp;gt;&lt;/span&gt;admin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;username&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;password&lt;/span&gt;&amp;gt;&lt;/span&gt;admin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;password&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;referenceUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;hibernate:spring:com.xxx.isg.domain?dialect=org.hibernate.dialect.H2Dialect&amp;amp;amp;hibernate.ejb.naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringNamingStrategy&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;referenceUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;verbose&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;verbose&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;logging&lt;/span&gt;&amp;gt;&lt;/span&gt;debug&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;logging&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;diffExcludeObjects&lt;/span&gt;&amp;gt;&lt;/span&gt;oauth_access_token, oauth_approvals, oauth_client_details, oauth_client_token, oauth_code, oauth_refresh_token&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;diffExcludeObjects&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plugin&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;And there is no need to change any existing &lt;code&gt;xml&lt;/code&gt; files except &lt;code&gt;master.xml&lt;/code&gt;. Otherwise, a liquibase checksum validation error will raise.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;load-data-to-db&quot;&gt;&lt;a href=&quot;#Load-Data-to-DB&quot; class=&quot;headerlink&quot; title=&quot;Load Data to DB&quot;&gt;&lt;/a&gt;&lt;strong&gt;Load Data to DB&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;Create a &lt;code&gt;.csv&lt;/code&gt; file with data in &lt;code&gt;src/main/resources/config/liquibase&lt;/code&gt; directory.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create a &lt;code&gt;change log&lt;/code&gt; in &lt;code&gt;src/main/resources/config/liquibase/changelog&lt;/code&gt; directory. For example, a &lt;code&gt;xml&lt;/code&gt; file with name &lt;code&gt;20161140000001_load_data_UserDevice.xml&lt;/code&gt;, which specify the changelog id, data file, separator and table name.&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;databaseChangeLog&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;xmlns:xsi&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;xsi:schemaLocation&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Loaded data for UserDevice.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    --&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;changeSet&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;20161110000001-3&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;author&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;jhipster&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;loadData&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;encoding&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;config/liquibase/user_device.csv&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;attr&quot;&gt;separator&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;attr&quot;&gt;tableName&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;user_device&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;changeSet&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;databaseChangeLog&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Update &lt;code&gt;master.xml&lt;/code&gt; file with the changelog of loading data.&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;databaseChangeLog&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;classpath:config/liquibase/changelog/20161140000001_load_data_UserDevice.xml&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;relativeToChangelogFile&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;false&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;databaseChangeLog&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;run &lt;code&gt;./mvnw clean&lt;/code&gt; to clean the DB.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;update-default-data&quot;&gt;&lt;a href=&quot;#Update-Default-Data&quot; class=&quot;headerlink&quot; title=&quot;Update Default Data&quot;&gt;&lt;/a&gt;&lt;strong&gt;Update Default Data&lt;/strong&gt;&lt;/h4&gt;Here taking &lt;code&gt;USER&lt;/code&gt; and &lt;code&gt;USER_AUTHORITY&lt;/code&gt; table for example. &lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;In file &lt;code&gt;users.csv&lt;/code&gt;, update all default user data&lt;br&gt;The password should be encrypted.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; org.springframework.security.crypto.password.PasswordEncoder;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Inject&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; PasswordEncoder passwordEncoder;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;String encryptedPassword = passwordEncoder.encode(password);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In file &lt;code&gt;users_authorities.csv&lt;/code&gt;, update user authorities bridge table.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Run maven test to make sure all tests can pass. For example, if the admin user is changed, one of the test in &lt;code&gt;UserResourceIntTest.java&lt;/code&gt; might be failed.&lt;br&gt;&lt;img src=&quot;/content/images/2016/jhipster_load_data.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;Security-Configuration&quot;&gt;&lt;a href=&quot;#Security-Configuration&quot; class=&quot;headerlink&quot; title=&quot;Security Configuration&quot;&gt;&lt;/a&gt;&lt;strong&gt;Security Configuration&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;JHipster-Security&quot;&gt;&lt;a href=&quot;#JHipster-Security&quot; class=&quot;headerlink&quot; title=&quot;JHipster Security&quot;&gt;&lt;/a&gt;&lt;strong&gt;JHipster Security&lt;/strong&gt;&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;To use Spring Security with a Single Web Page Application, like the ones generated by JHipster, you need Ajax login/logout/error views. We have configured Spring Security in order to use those views correctly, and of course we generate all the JavaScript and HTML code for you.&lt;br&gt;By default, JHipster comes with 4 different users:&lt;br&gt;“system”, who is mainly used by our audit logs, when something is done automatically&lt;br&gt;“anonymousUser”, who is given to anonymous users when they do an action&lt;br&gt;“user”, who is a normal user with “ROLE_USER” authorization. His default password is “user”&lt;br&gt;“admin”, who is an admin user with “ROLE_USER” and “ROLE_ADMIN” authorizations. His default password is “admin”&lt;br&gt;For security reasons, you should change those default passwords.&lt;br&gt;More info are provided here: &lt;a href=&quot;https://jhipster.github.io/security/&quot;&gt;https://jhipster.github.io/security/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Framework" scheme="http://volcanohong.github.com/categories/Framework/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="framework" scheme="http://volcanohong.github.com/tags/framework/"/>
    
      <category term="jhipster" scheme="http://volcanohong.github.com/tags/jhipster/"/>
    
  </entry>
  
  <entry>
    <title>Jhipster Notes</title>
    <link href="http://volcanohong.github.com/2016/11/11/jhipster-notes/"/>
    <id>http://volcanohong.github.com/2016/11/11/jhipster-notes/</id>
    <published>2016-11-12T05:37:31.000Z</published>
    <updated>2016-11-19T15:27:36.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;install-jhipster&quot;&gt;&lt;a href=&quot;#Install-JHipster&quot; class=&quot;headerlink&quot; title=&quot;Install JHipster&quot;&gt;&lt;/a&gt;&lt;strong&gt;Install JHipster&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Requirement: Java 8, Maven, Git, Node.js&lt;/p&gt;
&lt;p&gt;Start with installing &lt;code&gt;Yeoman&lt;/code&gt; and &lt;code&gt;Bower&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npm install -g yo&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://yeoman.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;YEOMAN&lt;/a&gt;, the web’s scaffording tool for webapps. Yeoman helps you to kickstart new projects, prescribing best practices and tools to help you stay productive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;npm install -g bower&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://bower.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BOWER&lt;/a&gt;, a package manager for the web. Web sites are made of lots of things — frameworks, libraries, assets, and utilities. Bower manages all these things for you. Bower keeps track of these packages in a manifest file, &lt;code&gt;bower.json&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then, install &lt;code&gt;Grunt&lt;/code&gt; and &lt;code&gt;jHipster&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npm install -g grunt-cli&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://gruntjs.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GRUNT&lt;/a&gt;, the javascript task runner. With literally hundreds of plugins to choose from, you can use Grunt to automate just about anything with a minimum of effort.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;npm install -g generator-jhipster&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://jhipster.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JHipster&lt;/a&gt; is a fully Open Source, widely used application generator. Easily create high-quality Spring Boot + AngularJS projects!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;We may also need to do this.&lt;br&gt;&lt;code&gt;npm install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bower install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;And option for installing &lt;code&gt;Gulp&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gulp install&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://gulpjs.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gulp&lt;/a&gt; is a task/build runner for development. It allows you to do a lot of stuff within your development workflow. You can compile sass files, uglify and compress js files and much more. The kicker for gulp is that its a streaming build system which doesn’t write temp files. It’s like Pipes in bash. One task flow into another. Gulp could be compared to Grunt in its usage. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;new-project&quot;&gt;&lt;a href=&quot;#New-Project&quot; class=&quot;headerlink&quot; title=&quot;New Project&quot;&gt;&lt;/a&gt;&lt;strong&gt;New Project&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Invoke &lt;code&gt;jHipster&lt;/code&gt; to create a new project&lt;/p&gt;
&lt;p&gt;&lt;code&gt;yo jhipster&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;On running this command, it needs to answer questions about how the application to be generated.&lt;br&gt;&lt;img src=&quot;/content/images/2016/jhipster_generating_app.png&quot; alt=&quot;Generating the application&quot;&gt;&lt;/p&gt;
&lt;p&gt;After answering all the questions, JHipster created a whole bunch of files.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;run-test&quot;&gt;&lt;a href=&quot;#Run-Test&quot; class=&quot;headerlink&quot; title=&quot;Run Test&quot;&gt;&lt;/a&gt;&lt;strong&gt;Run Test&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To make sure everything was good to go, &lt;/p&gt;
&lt;p&gt;Run unit tests using &lt;code&gt;grunt test&lt;/code&gt; or &lt;code&gt;./mvnw test&lt;/code&gt; (or &lt;code&gt;mvn test&lt;/code&gt; if you have maven).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;run-project&quot;&gt;&lt;a href=&quot;#Run-Project&quot; class=&quot;headerlink&quot; title=&quot;Run Project&quot;&gt;&lt;/a&gt;&lt;strong&gt;Run Project&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Command for running a project&lt;/p&gt;
&lt;p&gt;&lt;code&gt;./mvnw&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Whenever the DB is updated, it has to clean the &lt;code&gt;/target&lt;/code&gt; file which including temporary and DB files to initialize the DB.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;./mvnw clean&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Sometimes, when the temporary files are deleted, the app may raise error like &lt;code&gt;... bean not found&lt;/code&gt;. Try to avoid it by compile again&lt;/p&gt;
&lt;p&gt;&lt;code&gt;./mvnw compile&lt;/code&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;update-jhipster&quot;&gt;&lt;a href=&quot;#Update-Jhipster&quot; class=&quot;headerlink&quot; title=&quot;Update Jhipster&quot;&gt;&lt;/a&gt;&lt;strong&gt;Update Jhipster&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Update &lt;code&gt;jHipster&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm update -g generator-jhipster&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;This installs the latest version of JHipster, but does nothing to upgrade the project. Then, run the following command to update the project.&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yo jhipster&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;add-material-design&quot;&gt;&lt;a href=&quot;#Add-Material-Design&quot; class=&quot;headerlink&quot; title=&quot;Add Material Design&quot;&gt;&lt;/a&gt;&lt;strong&gt;Add Material Design&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For instance,&lt;br&gt;Check &lt;code&gt;bower.json&lt;/code&gt; with&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;quot;bootstrap-material-design&amp;quot;: &amp;quot;~0.3.0&amp;quot;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;At bottom of &lt;code&gt;index.html&lt;/code&gt; (&lt;code&gt;src/main/webapp/index.html&lt;/code&gt;), add&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;script&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    $.material.init()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/script&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;liquibase-inconsistency&quot;&gt;&lt;a href=&quot;#Liquibase-Inconsistency&quot; class=&quot;headerlink&quot; title=&quot;Liquibase Inconsistency&quot;&gt;&lt;/a&gt;&lt;strong&gt;Liquibase Inconsistency&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you add or modify a JPA entity, you will need to update your DB schema.&lt;/p&gt;
&lt;p&gt;If you have choosen to use MySQL, MariaDB or PostgreSQL in development, you can use the &lt;code&gt;./mvnw liquibase:diff&lt;/code&gt; goal to automatically generate a changelog.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;entity-creation-or-update&quot;&gt;&lt;a href=&quot;#Entity-Creation-or-Update&quot; class=&quot;headerlink&quot; title=&quot;Entity Creation or Update&quot;&gt;&lt;/a&gt;&lt;strong&gt;Entity Creation or Update&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Method 1&lt;/strong&gt;: The jhipster command used to create an entity, then in command line, answer the questions, such as field name, type, constraints and relationships to other entities.&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yo jhipster:entity &amp;lt;name&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Method 2&lt;/strong&gt;: Generating an entity directily by json files.&lt;/p&gt;
&lt;p&gt;For instance, first creating json file, e.g., &lt;code&gt;UserGroup.json&lt;/code&gt;, then, run &lt;code&gt;yo jhipster:entity userGroup&lt;/code&gt; and re-gernerate the entity.&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;fluentMethods&quot;&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;relationships&quot;&lt;/span&gt;: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;relationshipType&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;many-to-one&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;relationshipName&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;loyaltyScheme&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;otherEntityName&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;loyaltyScheme&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;otherEntityField&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldName&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldType&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;String&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldValidateRules&quot;&lt;/span&gt;: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;required&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldName&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;age&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldType&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Integer&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldName&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;gender&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldType&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;GenderType&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;fieldValues&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;M,F&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;changelogDate&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;20161107000001&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;dto&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;mapstruct&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;service&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;no&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;entityTableName&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;user_group&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;pagination&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;infinite-scroll&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;The above json file define the entity name, fields, relationships, changelog id,  whether or not to generate DTO and service layers, the style of pagination at the same time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Method 3&lt;/strong&gt;: Using &lt;a href=&quot;https://jhipster.github.io/jdl/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JDL&lt;/a&gt; to create a whole bunch of entities based on DB schema.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;jhipster-domain-language-jdl&quot;&gt;&lt;a href=&quot;#Jhipster-Domain-Language-JDL&quot; class=&quot;headerlink&quot; title=&quot;Jhipster Domain Language (JDL)&quot;&gt;&lt;/a&gt;&lt;strong&gt;Jhipster Domain Language (JDL)&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;The &lt;a href=&quot;https://jhipster.github.io/jdl/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JDL&lt;/a&gt; is a JHipster specific domain language which describes all the entities and their relationships in a single file (or more than one) with a simple and user-friendly syntax.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/jhipster_entity_jdl.png&quot; alt=&quot;Generating entity by JDL&quot;&gt;&lt;/p&gt;
&lt;p&gt;Entity syntax:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;entity name&lt;/code&gt; is the name of the entity,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;field name&lt;/code&gt; the name of one field of the entity,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;type&lt;/code&gt; the JHipster supported type of the field,&lt;/li&gt;
&lt;li&gt;and as an option &lt;validation&gt; the validations for the field.&lt;/validation&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;entity Author &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    name String required,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    address String required maxlength(100),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    age Integer required min(18)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;relationship (OneToMany | ManyToOne | OneToOne | ManyToMany) &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;from entity&amp;gt;[&amp;#123;&amp;lt;relationship name&amp;gt;&amp;#125;] to &amp;lt;to entity&amp;gt;[&amp;#123;&amp;lt;relationship name&amp;gt;&amp;#125;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;For example,&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;relationship OneToMany &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  Author&amp;#123;book&amp;#125; to Book&amp;#123;writer(name)&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Command for jhipster to create entity by using JDL file&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yo jhipster:import-jdl jhipster-jdl.jh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;q-amp-a&quot;&gt;&lt;a href=&quot;#Q-amp-A&quot; class=&quot;headerlink&quot; title=&quot;Q &amp;amp; A&quot;&gt;&lt;/a&gt;&lt;strong&gt;Q &amp;amp; A&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Delete a entity ?&lt;br&gt;&lt;em&gt;Currently, jhipster has no function to delete an entity after creating it (20+ files). The best way is using version control to revert to the version before creating new entities.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Make Foreign Key to be required field?&lt;br&gt;&lt;em&gt;All the relationships in jhipster is a loose control. So the FK cannot set to be required when creating entities.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Ref&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://jhipster.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JHipster&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;Install-JHipster&quot;&gt;&lt;a href=&quot;#Install-JHipster&quot; class=&quot;headerlink&quot; title=&quot;Install JHipster&quot;&gt;&lt;/a&gt;&lt;strong&gt;Install JHipster&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Requirement: Java 8, Maven, Git, Node.js&lt;/p&gt;
&lt;p&gt;Start with installing &lt;code&gt;Yeoman&lt;/code&gt; and &lt;code&gt;Bower&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npm install -g yo&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://yeoman.io/&quot;&gt;YEOMAN&lt;/a&gt;, the web’s scaffording tool for webapps. Yeoman helps you to kickstart new projects, prescribing best practices and tools to help you stay productive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;npm install -g bower&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://bower.io/&quot;&gt;BOWER&lt;/a&gt;, a package manager for the web. Web sites are made of lots of things — frameworks, libraries, assets, and utilities. Bower manages all these things for you. Bower keeps track of these packages in a manifest file, &lt;code&gt;bower.json&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then, install &lt;code&gt;Grunt&lt;/code&gt; and &lt;code&gt;jHipster&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npm install -g grunt-cli&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://gruntjs.com/&quot;&gt;GRUNT&lt;/a&gt;, the javascript task runner. With literally hundreds of plugins to choose from, you can use Grunt to automate just about anything with a minimum of effort.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;npm install -g generator-jhipster&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://jhipster.github.io/&quot;&gt;JHipster&lt;/a&gt; is a fully Open Source, widely used application generator. Easily create high-quality Spring Boot + AngularJS projects!&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Framework" scheme="http://volcanohong.github.com/categories/Framework/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="framework" scheme="http://volcanohong.github.com/tags/framework/"/>
    
      <category term="jhipster" scheme="http://volcanohong.github.com/tags/jhipster/"/>
    
  </entry>
  
  <entry>
    <title>AngularJS notes I</title>
    <link href="http://volcanohong.github.com/2016/11/01/angularjs-notes-1/"/>
    <id>http://volcanohong.github.com/2016/11/01/angularjs-notes-1/</id>
    <published>2016-11-02T04:37:31.000Z</published>
    <updated>2016-11-08T03:25:11.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;error-digest-already-in-progress-when-calling-scopeapply&quot;&gt;&lt;a href=&quot;#Error-digest-already-in-progress-when-calling-scope-apply&quot; class=&quot;headerlink&quot; title=&quot;Error: $digest already in progress when calling $scope.$apply()&quot;&gt;&lt;/a&gt;&lt;strong&gt;Error: &lt;code&gt;$digest&lt;/code&gt; already in progress when calling &lt;code&gt;$scope.$apply()&lt;/code&gt;&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Raise error when calling &lt;code&gt;$scope.$apply()&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$scope.$apply(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    vm.error = &lt;span class=&quot;string&quot;&gt;&#39;ERROR&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Problem is fixed by calling &lt;code&gt;$timeout&lt;/code&gt; instead.&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$timeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//code here will run afterwards&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   vm.error = &lt;span class=&quot;string&quot;&gt;&#39;ERROR&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;Comments:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Simply using &lt;code&gt;$timeout&lt;/code&gt; is not the best nor the right solution. Also, make sure that if you are concerned by performances or scalability.&lt;/p&gt;
&lt;p&gt;Things we should know&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$$phase&lt;/code&gt;&lt;/strong&gt; is private to the framework and there are good reasons for that.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$timeout(callback)&lt;/code&gt;&lt;/strong&gt; will wait until the current digest cycle (if any) is done, then execute the callback, then run at the end a full &lt;code&gt;$apply&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$timeout(callback, delay, false)&lt;/code&gt;&lt;/strong&gt; will do the same (with an optional delay before executing the callback), but will not fire an &lt;code&gt;$apply&lt;/code&gt; (third argument) which saves performances if you didn’t modify your Angular model (&lt;code&gt;$scope&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$scope.$apply(callback)&lt;/code&gt;&lt;/strong&gt; invokes, among other things, &lt;strong&gt;&lt;code&gt;$rootScope.$digest&lt;/code&gt;&lt;/strong&gt;, which means it will redigest the root scope of the application and all of its children, even if you’re within an isolated scope.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$scope.$digest()&lt;/code&gt;&lt;/strong&gt; will simply sync its model to the view, but will not digest its parents scope, which can save a lot of performances when working on an isolated part of your HTML with an isolated scope (from a directive mostly). &lt;code&gt;$digest&lt;/code&gt; does not take a callback: you execute the code, then digest.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$scope.$evalAsync(callback)&lt;/code&gt;&lt;/strong&gt; has been introduced with angularjs 1.2, and will probably solve most of your troubles. Please refer to the last paragraph to learn more about it.&lt;br&gt;if you get the &lt;code&gt;$digest&lt;/code&gt; already in progress error, then your architecture is wrong: either you don’t need to redigest your scope, or you should not be in charge of that (see below).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How to structure your code&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;When you get that error, you’re trying to digest your scope while it’s already in progress: since you don’t know the state of your scope at that point, you’re not in charge of dealing with its digestion.&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;editModel&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    $scope.someVar = someVal;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/* Do not apply your scope here since we don&#39;t know if that function is called synchronously from Angular or from an asynchronous code */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Processed by Angular, for instance called by a ng-click directive&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$scope.applyModelSynchronously = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// No need to digest&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    editModel();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Any kind of asynchronous code, for instance a server request&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;callServer(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/* That code is not watched nor digested by Angular, thus we can safely $apply it */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    $scope.$apply(editModel);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;And if you know what you’re doing and working on an isolated small directive while part of a big Angular application, you could prefer &lt;code&gt;$digest&lt;/code&gt; instead over &lt;code&gt;$apply&lt;/code&gt; to save performances.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update since Angularjs 1.2&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;A new, powerful method has been added to any &lt;code&gt;$scope: $evalAsync&lt;/code&gt;. Basically, it will execute its callback within the current digest cycle if one is occurring, otherwise a new digest cycle will start executing the callback.&lt;/p&gt;
&lt;p&gt;That is still not as good as a &lt;code&gt;$scope.$digest&lt;/code&gt; if you really know that you only need to synchronize an isolated part of your HTML (since a new &lt;code&gt;$apply&lt;/code&gt; will be triggered if none is in progress), but this is the best solution when you are executing a function which you cannot know it if will be executed synchronously or not, for instance after fetching a resource potentially cached: sometimes this will require an async call to a server, otherwise the resource will be locally fetched synchronously.&lt;/p&gt;
&lt;p&gt;In these cases and all the others where you had a ! &lt;code&gt;$scope.$$phase&lt;/code&gt;, be sure to use &lt;code&gt;$scope.$evalAsync(callback)&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Ref&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://angular.io/docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;angular docs.&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;Error-digest-already-in-progress-when-calling-scope-apply&quot;&gt;&lt;a href=&quot;#Error-digest-already-in-progress-when-calling-scope-apply&quot; class=&quot;headerlink&quot; title=&quot;Error: $digest already in progress when calling $scope.$apply()&quot;&gt;&lt;/a&gt;&lt;strong&gt;Error: &lt;code&gt;$digest&lt;/code&gt; already in progress when calling &lt;code&gt;$scope.$apply()&lt;/code&gt;&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Raise error when calling &lt;code&gt;$scope.$apply()&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$scope.$apply(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    vm.error = &lt;span class=&quot;string&quot;&gt;&#39;ERROR&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Problem is fixed by calling &lt;code&gt;$timeout&lt;/code&gt; instead.&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$timeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//code here will run afterwards&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   vm.error = &lt;span class=&quot;string&quot;&gt;&#39;ERROR&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://volcanohong.github.com/categories/Javascript/"/>
    
    
      <category term="angular" scheme="http://volcanohong.github.com/tags/angular/"/>
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>Java QR code</title>
    <link href="http://volcanohong.github.com/2016/10/07/java-qr-code/"/>
    <id>http://volcanohong.github.com/2016/10/07/java-qr-code/</id>
    <published>2016-10-08T04:27:41.000Z</published>
    <updated>2017-01-01T18:49:36.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;qr-code-generator&quot;&gt;&lt;a href=&quot;#QR-Code-Generator&quot; class=&quot;headerlink&quot; title=&quot;QR Code Generator&quot;&gt;&lt;/a&gt;&lt;strong&gt;QR Code Generator&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Utilize google QR code generator …&lt;br&gt;Define the &lt;code&gt;charset&lt;/code&gt;, &lt;code&gt;format&lt;/code&gt;, and &lt;code&gt;size&lt;/code&gt;.&lt;br&gt;Use &lt;code&gt;MatrixToImageWriter&lt;/code&gt; to write a &lt;code&gt;BitMatrix&lt;/code&gt; to &lt;code&gt;BufferedImage&lt;/code&gt;, file or stream. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;em&gt;toBufferedImage&lt;/em&gt; method&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; BufferedImage &lt;span class=&quot;title&quot;&gt;toBufferedImage&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(BitMatrix matrix)&lt;/span&gt; &lt;/span&gt;&amp;#123;...&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;encode&lt;/em&gt; method&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; BitMatrix &lt;span class=&quot;title&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String contents, BarcodeFormat format, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; width, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; height, Map&amp;lt;EncodeHintType, ?&amp;gt; hints)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; WriterException &lt;/span&gt;&amp;#123;...&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;decode&lt;/em&gt; method&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Result &lt;span class=&quot;title&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(BinaryBitmap image, Map&amp;lt;DecodeHintType, ?&amp;gt; hints)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; NotFoundException &lt;/span&gt;&amp;#123;...&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Available &lt;code&gt;BarcodeFormat&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; BarcodeFormat &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    AZTEC,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    CODABAR,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    CODE_39,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    CODE_93,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    CODE_128,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    DATA_MATRIX,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    EAN_8,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    EAN_13,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ITF,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    MAXICODE,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    PDF_417,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    QR_CODE,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    RSS_14,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    RSS_EXPANDED,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    UPC_A,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    UPC_E,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    UPC_EAN_EXTENSION;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;An example goes here …&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.google.zxing.*;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.google.zxing.client.j2se.BufferedImageLuminanceSource;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.google.zxing.client.j2se.MatrixToImageWriter;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.google.zxing.common.HybridBinarizer;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; javax.imageio.ImageIO;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.*;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ZxingUtil&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;EncodeHintType, ErrorCorrectionLevel&amp;gt; encodeMap = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;EncodeHintType, ErrorCorrectionLevel&amp;gt;();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;DecodeHintType, ErrorCorrectionLevel&amp;gt; decodeMap = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;DecodeHintType, ErrorCorrectionLevel&amp;gt;();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; String charset=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;, format=&lt;span class=&quot;string&quot;&gt;&quot;png&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; size = &lt;span class=&quot;number&quot;&gt;150&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ZxingUtil&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * QR code encoder&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     *&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@param&lt;/span&gt; data data to be encoded&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@throws&lt;/span&gt; WriterException&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@throws&lt;/span&gt; IOException&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; BufferedImage &lt;span class=&quot;title&quot;&gt;createQRCode&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String data)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; WriterException, IOException &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; MatrixToImageWriter.toBufferedImage(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MultiFormatWriter()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                .encode(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(data.getBytes(charset), charset),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    BarcodeFormat.QR_CODE, size, size, encodeMap));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * QR code decoder&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     *&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@param&lt;/span&gt; image QR code image&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@throws&lt;/span&gt; FileNotFoundException&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@throws&lt;/span&gt; IOException&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@throws&lt;/span&gt; NotFoundException&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;readQRCode&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;[] image)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; FileNotFoundException, IOException, NotFoundException &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MultiFormatReader().decode(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BinaryBitmap(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HybridBinarizer(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BufferedImageLuminanceSource(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        ImageIO.read(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(image))))), decodeMap).getText();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;example-to-create-qr-code&quot;&gt;&lt;a href=&quot;#Example-to-Create-QR-Code&quot; class=&quot;headerlink&quot; title=&quot;Example to Create QR Code&quot;&gt;&lt;/a&gt;&lt;strong&gt;Example to Create QR Code&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An example of using above method to create QR code …&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * create user QR scan code&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@param&lt;/span&gt; userScanCodeDTO&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt; Optional&amp;lt;BufferedImage&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Optional&amp;lt;Image&amp;gt; &lt;span class=&quot;title&quot;&gt;createUserQRCode&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(@NotNull UserScanCodeDTO userScanCodeDTO)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    log.debug(&lt;span class=&quot;string&quot;&gt;&quot;create user QR code : &amp;#123;&amp;#125;&quot;&lt;/span&gt;, userScanCodeDTO);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Optional.of(userScanCodeDTO)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .map(usc -&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            BufferedImage bufferedImage = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                bufferedImage = ZxingUtil.createQRCode(usc.getScanCode());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                log.debug(e.getMessage());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; bufferedImage;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .map(bufferedImage -&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ByteArrayOutputStream bs = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Image image = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                ImageIO.write(bufferedImage, &lt;span class=&quot;string&quot;&gt;&quot;png&quot;&lt;/span&gt;, bs);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                 image = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Image()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    .name(userScanCodeDTO.getScanCode())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    .image(bs.toByteArray())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    .imageContentType(&lt;span class=&quot;string&quot;&gt;&quot;image/png&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                bs.close();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (IOException e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                log.debug(e.getMessage());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; image;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Ref:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://zxing.github.io/zxing/apidocs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ZXing 3.3.0 API&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;QR-Code-Generator&quot;&gt;&lt;a href=&quot;#QR-Code-Generator&quot; class=&quot;headerlink&quot; title=&quot;QR Code Generator&quot;&gt;&lt;/a&gt;&lt;strong&gt;QR Code Generator&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Utilize google QR code generator …&lt;br&gt;Define the &lt;code&gt;charset&lt;/code&gt;, &lt;code&gt;format&lt;/code&gt;, and &lt;code&gt;size&lt;/code&gt;.&lt;br&gt;Use &lt;code&gt;MatrixToImageWriter&lt;/code&gt; to write a &lt;code&gt;BitMatrix&lt;/code&gt; to &lt;code&gt;BufferedImage&lt;/code&gt;, file or stream. &lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://volcanohong.github.com/categories/Java/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
      <category term="qrcode" scheme="http://volcanohong.github.com/tags/qrcode/"/>
    
  </entry>
  
  <entry>
    <title>Java8 notes I</title>
    <link href="http://volcanohong.github.com/2016/10/06/java8-notes-1/"/>
    <id>http://volcanohong.github.com/2016/10/06/java8-notes-1/</id>
    <published>2016-10-07T03:22:12.000Z</published>
    <updated>2016-11-06T02:51:35.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;javautiloptional&quot;&gt;&lt;a href=&quot;#java-util-Optional&quot; class=&quot;headerlink&quot; title=&quot;java.util.Optional&quot;&gt;&lt;/a&gt;&lt;strong&gt;java.util.Optional&lt;t&gt;&lt;/t&gt;&lt;/strong&gt;&lt;/h4&gt;Imagine &lt;code&gt;Optional&lt;/code&gt; as a container that may or may not contain some value. Just like all references in Java can point to some object or be null, &lt;code&gt;Option&lt;/code&gt; may enclose some (non-null!) reference or be empty.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;Optional&lt;/code&gt; instead of plain null is statically checked at compile time and much more informative as it clearly indicates that a given variable may be present or not. Of course it requires some discipline - you should never assign null to any variable any more.&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There are few ways of creating &lt;code&gt;Optional&lt;/code&gt;:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;\\Optional must contain not &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; value and will &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; an exception &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; is passed. &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opt = Optional.of(notNull);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;\\ofNullable() &lt;span class=&quot;function&quot;&gt;will either return empty or &lt;span class=&quot;title&quot;&gt;present&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(set)&lt;/span&gt; Optional.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opt = Optional.ofNullable(mayBeNull);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;\\empty() always &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; empty Optional, corresponding to &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;. It’s a singleton because Optional&amp;lt;T&amp;gt; is immutable.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opt = Optional.empty();&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;In this case, &lt;code&gt;opt&lt;/code&gt; is never null, but may or may not contain some value (present or empty).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h5 id=&quot;ifpresent-do-something-when-optional-is-set&quot;&gt;&lt;a href=&quot;#ifPresent-do-something-when-Optional-is-set&quot; class=&quot;headerlink&quot; title=&quot;ifPresent() - do something when Optional is set&quot;&gt;&lt;/a&gt;&lt;strong&gt;ifPresent()&lt;/strong&gt; - &lt;em&gt;do something when Optional is set&lt;/em&gt;&lt;/h5&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tedious if statement:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (x != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    print(x);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;can be replaced with higher-order function &lt;code&gt;ifPresent()&lt;/code&gt;:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;opt.ifPresent(x -&amp;gt; print(x));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opt.ifPresent(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;::print);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;The latter syntax (method reference) can be used when &lt;code&gt;lambda&lt;/code&gt; argument (String x) matches function formal parameters.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h5 id=&quot;filter-reject-filter-out-certain-optional-values&quot;&gt;&lt;a href=&quot;#filter-reject-filter-out-certain-Optional-values&quot; class=&quot;headerlink&quot; title=&quot;filter() - reject (filter out) certain Optional values&quot;&gt;&lt;/a&gt;&lt;strong&gt;filter()&lt;/strong&gt; - &lt;em&gt;reject (filter out) certain Optional values&lt;/em&gt;&lt;/h5&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sometimes you want to perform some action not only when a reference is set but also when it meets certain condition:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (x != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; x.contains(&lt;span class=&quot;string&quot;&gt;&quot;ab&quot;&lt;/span&gt;)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    print(x);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;This can be replaced with &lt;code&gt;Optional.filter()&lt;/code&gt; that turns present (set) Optional to empty Optional if underlying value does not meet given predicate. If input Optional was empty, it is returned as-is:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;opt.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   filter(x -&amp;gt; x.contains(&lt;span class=&quot;string&quot;&gt;&quot;ab&quot;&lt;/span&gt;)).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   ifPresent(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;::print);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```   &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;This is equivalent to more imperative:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```&lt;span class=&quot;function&quot;&gt;java&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(opt.isPresent()&lt;/span&gt; &amp;amp;&amp;amp; opt.&lt;span class=&quot;title&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;string&quot;&gt;&quot;ab&quot;&lt;/span&gt;)&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    print(opt.get());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h5 id=&quot;map-transform-value-if-present&quot;&gt;&lt;a href=&quot;#map-transform-value-if-present&quot; class=&quot;headerlink&quot; title=&quot;map() - transform value if present&quot;&gt;&lt;/a&gt;&lt;strong&gt;map()&lt;/strong&gt; - &lt;em&gt;transform value if present&lt;/em&gt;&lt;/h5&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Very often you need to apply some transformation on a value, but only if it’s not null (avoiding &lt;code&gt;NullPointerException&lt;/code&gt;):&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (x != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    String t = x.trim();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (t.length() &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        print(t);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;This can be done in much more declarative way using &lt;code&gt;map()&lt;/code&gt;:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;opt.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    map(String::trim).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    filter(t -&amp;gt; t.length() &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ifPresent(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;::print);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;This becomes tricky. &lt;code&gt;Optional.map()&lt;/code&gt; applies given function on a value inside Optional - but only if Optional is present. Otherwise nothing happens and &lt;code&gt;empty()&lt;/code&gt; is returned. Remember that the transformation is type-safe - look at generics here:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Optional&amp;lt;String&amp;gt;  opt = &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Optional&amp;lt;Integer&amp;gt; len = opt.map(String::length);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;Optional&amp;lt;String&amp;gt;&lt;/code&gt; is present. &lt;code&gt;Optional&amp;lt;Integer&amp;gt;&lt;/code&gt; len is present as well, wrapping length of a String. But if &lt;code&gt;opt&lt;/code&gt; was empty, &lt;code&gt;map()&lt;/code&gt; over it does nothing except changing generic type.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h5 id=&quot;orelseorelseget-turning-empty-optionallttgt-to-default-t&quot;&gt;&lt;a href=&quot;#orElse-orElseGet-turning-empty-Optional-lt-T-gt-to-default-T&quot; class=&quot;headerlink&quot; title=&quot;orElse()/orElseGet() - turning empty Optional&amp;lt;T&amp;gt; to default T&quot;&gt;&lt;/a&gt;&lt;strong&gt;orElse()/orElseGet()&lt;/strong&gt; - &lt;em&gt;turning empty &lt;code&gt;Optional&amp;lt;T&amp;gt;&lt;/code&gt; to default &lt;code&gt;T&lt;/code&gt;&lt;/em&gt;&lt;/h5&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;At some point you may wish to unwrap &lt;code&gt;Optional&lt;/code&gt; and get a hold of real value inside. But you can’t do this if &lt;code&gt;Optional&lt;/code&gt; is empty. Here is a pre-Java 8 way of handling such scenario:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len = (x != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)? x.length() : -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;With &lt;code&gt;Optional&lt;/code&gt; we can say:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len = opt.map(String::length).orElse(-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;There is also a version that accepts &lt;code&gt;Supplier&amp;lt;T&amp;gt;&lt;/code&gt; if computing default value is slow, expensive or has side-effects:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len = opt.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    map(String::length).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    orElseGet(() -&amp;gt; slowDefault());     &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//orElseGet(this::slowDefault)&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h5 id=&quot;orelsethrow-lazily-throw-exceptions-on-empty-optional&quot;&gt;&lt;a href=&quot;#orElseThrow-lazily-throw-exceptions-on-empty-Optional&quot; class=&quot;headerlink&quot; title=&quot;orElseThrow() - lazily throw exceptions on empty Optional&quot;&gt;&lt;/a&gt;&lt;strong&gt;orElseThrow()&lt;/strong&gt; - &lt;em&gt;lazily throw exceptions on empty &lt;code&gt;Optional&lt;/code&gt;&lt;/em&gt;&lt;/h5&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Often we would like to throw an exception if value is not available:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;firstChar&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String s)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (s != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !s.isEmpty())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; s.charAt(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;This whole method can be replaced with the following idiom:&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;opt.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    filter(s -&amp;gt; !s.isEmpty()).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    map(s -&amp;gt; s.charAt(0)).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    orElseThrow(IllegalArgumentException::new);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;We don’t want to create an instance of exception in advance because creating an exception has _significant cost_.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* ##### **flatMap()** - _mapping over a function that returns `Optional`_&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Imagine you have a function that does not accept null but may produce one:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;public String findSimilar(@NotNull String s) //...&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Using it is a bit cumbersome:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;String similarOrNull = x != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;? findSimilar(x) : &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;With Optional it is a bit more straighforward:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Optional&amp;lt;String&amp;gt; similar = opt.map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;::findSimilar);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;If the function we map() over returns null, the result of map() is an empty Optional. Otherwise it’s the result of said function wrapped with (present) Optional. So far so good but why do we return nullable value if we have Optional?&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Optional&amp;lt;String&amp;gt; &lt;span class=&quot;title&quot;&gt;tryFindSimilar&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String s)&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Our intentions are clear but using map() fails to produce correct type. Instead we must use flatMap():&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Optional&amp;lt;Optional&amp;lt;String&amp;gt;&amp;gt; bad = opt.map(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;::tryFindSimilar);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Optional&amp;lt;String&amp;gt; similar =       opt.flatMap(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;::tryFindSimilar);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Do you see double &lt;code&gt;Optional&amp;lt;Optional&amp;lt;...&amp;gt;&amp;gt;&lt;/code&gt;? Definitely not what we want. If you are mapping over a function that returns Optional, use flatMap instead. Here is a simplified implementation of this function:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &amp;lt;U&amp;gt; &lt;span class=&quot;function&quot;&gt;Optional&amp;lt;U&amp;gt; &lt;span class=&quot;title&quot;&gt;flatMap&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Function&amp;lt;T, Optional&amp;lt;U&amp;gt;&amp;gt; mapper)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!isPresent())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; empty();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mapper.apply(value);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Bigger example&lt;/p&gt;
&lt;p&gt;Imagine we have a Person with an Address that has a validFrom date. All of these can be null. We would like to know whether validFrom is set and in the past:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;validAddress&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(NullPerson person)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (person != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (person.getAddress() != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Instant validFrom = person.getAddress().getValidFrom();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; validFrom != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; validFrom.isBefore(now());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Quite ugly and defensive. Alternatively but still ugly:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; person != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       person.getAddress() != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       person.getAddress().getValidFrom() != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp;       person.getAddress().getValidFrom().isBefore(now());&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Now imagine all of these (person, getAddress(), getValidFrom()) are Optionals of appropriate types, clearly indicating they may not be set:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Optional&amp;lt;Address&amp;gt; address;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Optional&amp;lt;Address&amp;gt; &lt;span class=&quot;title&quot;&gt;getAddress&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; address;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Address&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Optional&amp;lt;Instant&amp;gt; validFrom;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Optional&amp;lt;Instant&amp;gt; &lt;span class=&quot;title&quot;&gt;getValidFrom&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; validFrom;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Suddenly the computation is much more streamlined:&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;return person.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        flatMap(Person::getAddress).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        flatMap(Address::getValidFrom).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        filter(x -&amp;gt; x.before(now())).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        isPresent();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Is it more readable? Hard to tell. But at least it’s impossible to produce NullPointerException when Optional is used consistently.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* ##### **Converting Optional&amp;lt;T&amp;gt; to List&amp;lt;T&amp;gt;**&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Thinking about Optional as a collection1 having either 0 or 1 elements, this may make understanding of map() and flatMap() easier. Unfortunately Optional doesn’t have toList() method, but it’s easy to implement one:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;public static &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; toList(Optional&amp;lt;T&amp;gt; option) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    return option.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            map(Collections::singletonList).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            orElse(Collections.emptyList());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Or less idiomatically:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; &lt;span class=&quot;function&quot;&gt;List&amp;lt;T&amp;gt; &lt;span class=&quot;title&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Optional&amp;lt;T&amp;gt; option)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (option.isPresent())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Collections.singletonList(option.get());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Collections.emptyList();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;But why limit ourselves to List&lt;t&gt;? What about Set&lt;t&gt; and other collections? Java 8 already abstracts creating arbitrary collection via Collectors API, introduced for Streams. The API is hideous but comprehensible:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &amp;lt;R, A, T&amp;gt; &lt;span class=&quot;function&quot;&gt;R &lt;span class=&quot;title&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Optional&amp;lt;T&amp;gt; option, Collector&amp;lt;? &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; T, A, R&amp;gt; collector)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; A container = collector.supplier().get();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    option.ifPresent(v -&amp;gt; collector.accumulator().accept(container, v));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; collector.finisher().apply(container);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/t&gt;&lt;/t&gt;&lt;/p&gt;
&lt;p&gt;We can now say:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; java.util.stream.Collectors.*;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;List&amp;lt;String&amp;gt; list = collect(opt, toList());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Set&amp;lt;String&amp;gt;  set  = collect(opt, toSet());&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ref:&lt;/strong&gt; &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nurkiewicz.com/2013/08/optional-in-java-8-cheat-sheet.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Optional in Java 8 cheat sheet&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;java-util-Optional&quot;&gt;&lt;a href=&quot;#java-util-Optional&quot; class=&quot;headerlink&quot; title=&quot;java.util.Optional&quot;&gt;&lt;/a&gt;&lt;strong&gt;java.util.Optional&lt;T&gt;&lt;/strong&gt;&lt;/h4&gt;Imagine &lt;code&gt;Optional&lt;/code&gt; as a container that may or may not contain some value. Just like all references in Java can point to some object or be null, &lt;code&gt;Option&lt;/code&gt; may enclose some (non-null!) reference or be empty.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;Optional&lt;/code&gt; instead of plain null is statically checked at compile time and much more informative as it clearly indicates that a given variable may be present or not. Of course it requires some discipline - you should never assign null to any variable any more.&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://volcanohong.github.com/categories/Java/"/>
    
    
      <category term="java" scheme="http://volcanohong.github.com/tags/java/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>Angular2 Notes I</title>
    <link href="http://volcanohong.github.com/2016/10/01/angular2-notes-1/"/>
    <id>http://volcanohong.github.com/2016/10/01/angular2-notes-1/</id>
    <published>2016-10-01T17:39:45.000Z</published>
    <updated>2017-03-12T04:35:30.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;angular-2-basic&quot;&gt;&lt;a href=&quot;#Angular-2-Basic&quot; class=&quot;headerlink&quot; title=&quot;Angular 2 Basic&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular 2 Basic&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The heart of angular 2 is &lt;code&gt;containers&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;import from &lt;code&gt;angular/core&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Component, &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Input,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Output,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    EventEmitter &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;syntax&quot;&gt;&lt;a href=&quot;#Syntax&quot; class=&quot;headerlink&quot; title=&quot;Syntax&quot;&gt;&lt;/a&gt;&lt;strong&gt;Syntax&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Annotations&lt;br&gt;The @ is an annotation and it comes from TypeScript&lt;/li&gt;
&lt;li&gt;Component&lt;br&gt;Components teach your browser new tags&lt;/li&gt;
&lt;li&gt;Template&lt;br&gt;Views can be defined by the template option&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Multi-line Strings&lt;br&gt;Using ` backticks allows for easy inline templates&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &#39;main-container&#39;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    template: `&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;main&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            main content will go here&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;main&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    `&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Class Syntax&lt;br&gt;TypeScript allows you to define classes using the class syntax&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Events&lt;br&gt;One-way data binding means we fire events instead of modifying data directly&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NoteCard&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @Input() note = &amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @Output() checked = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; EventEmitter();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    showCheck: boolean = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    toggle() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.showCheck = ! &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.showCheck;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    onChecked() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.checked.next(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.note);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brackets for Parameters&lt;br&gt;Use [] brackets on an attribute to pass parameters to the directive&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Star Syntax&lt;br&gt;Use the * on an attribute to use a directive on this element&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Parenthesis for View Actions&lt;br&gt;Use () parenthesis to specify action bindings&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &#39;note-card&#39;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    template: `&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            [&lt;span class=&quot;attr&quot;&gt;ngStyle&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;&amp;#123;&#39;background-color&#39;: note.color&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;note-card row shadow-1&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            (&lt;span class=&quot;attr&quot;&gt;mouseenter&lt;/span&gt;) = &lt;span class=&quot;string&quot;&gt;&quot;toggle()&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            (&lt;span class=&quot;attr&quot;&gt;mouseleave&lt;/span&gt;) = &lt;span class=&quot;string&quot;&gt;&quot;toggle()&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;icon&quot;&lt;/span&gt; *&lt;span class=&quot;attr&quot;&gt;ngIf&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;showCheck&quot;&lt;/span&gt; (&lt;span class=&quot;attr&quot;&gt;click&lt;/span&gt;)=&lt;span class=&quot;string&quot;&gt;&quot;onChecked()&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;material-icons&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;check&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;i&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;col-xs-12 title&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123;&amp;#123; note.title &amp;#125;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;col-xs-12 value&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123;&amp;#123; note.value &amp;#125;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    `,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    style:[``]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Strong Typing&lt;br&gt;TypeScript lets us define collections that contain our custom type Product&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Component Definition Class&lt;br&gt;We define new Components with a class&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;some-syntax-instances&quot;&gt;&lt;a href=&quot;#Some-Syntax-Instances&quot; class=&quot;headerlink&quot; title=&quot;Some Syntax Instances&quot;&gt;&lt;/a&gt;&lt;strong&gt;Some Syntax Instances&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;using-to-call-directives&quot;&gt;&lt;a href=&quot;#Using-to-call-directives&quot; class=&quot;headerlink&quot; title=&quot;Using * to call directives&quot;&gt;&lt;/a&gt;&lt;strong&gt;Using &lt;code&gt;*&lt;/code&gt; to call directives&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ngIf&lt;/code&gt;&lt;br&gt;If the expression is evaluated to be a true, the &lt;code&gt;NgIf&lt;/code&gt; shows the elements, otherwise it removes the element from DOM.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; *&lt;span class=&quot;attr&quot;&gt;ngIf&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;showMe&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;export &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Angular2NgIf&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    showMe:&lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ngFor&lt;/code&gt;&lt;br&gt;NgFor directive repeats the part of a template for each item in an array.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;note-card&lt;/span&gt; *&lt;span class=&quot;attr&quot;&gt;ngFor&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;let note of notes; let i = index&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;export &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Notes&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    notes = [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;title: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, value: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;title: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, value: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;using-to-pass-parameter-to-directives&quot;&gt;&lt;a href=&quot;#Using-to-pass-parameter-to-directives&quot; class=&quot;headerlink&quot; title=&quot;Using [] to pass parameter to directives&quot;&gt;&lt;/a&gt;&lt;strong&gt;Using &lt;code&gt;[]&lt;/code&gt; to pass parameter to directives&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ngStyle&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; [&lt;span class=&quot;attr&quot;&gt;ngStyle&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;&amp;#123;&#39;background-color&#39;: note.color&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ngModel&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;input&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    [(&lt;span class=&quot;attr&quot;&gt;ngModel&lt;/span&gt;)]=&lt;span class=&quot;string&quot;&gt;&quot;newNote.title&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;newNoteTitle&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;equals to:&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;input&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    [&lt;span class=&quot;attr&quot;&gt;ngModel&lt;/span&gt;]=&lt;span class=&quot;string&quot;&gt;&quot;newNote.title&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    (&lt;span class=&quot;attr&quot;&gt;ngModelChange&lt;/span&gt;) = &lt;span class=&quot;string&quot;&gt;&quot;newNote.titel = $event&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;newNoteTitle&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;using-to-specify-action-bindings&quot;&gt;&lt;a href=&quot;#Using-to-specify-action-bindings&quot; class=&quot;headerlink&quot; title=&quot;Using () to specify action bindings&quot;&gt;&lt;/a&gt;&lt;strong&gt;Using &lt;code&gt;()&lt;/code&gt; to specify action bindings&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;note-card&lt;/span&gt; (&lt;span class=&quot;attr&quot;&gt;checked&lt;/span&gt;)=&lt;span class=&quot;string&quot;&gt;&quot;onNoteChecked($event, i)&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;inputoutput&quot;&gt;&lt;a href=&quot;#Input-Output&quot; class=&quot;headerlink&quot; title=&quot;Input/Output&quot;&gt;&lt;/a&gt;&lt;strong&gt;Input/Output&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Component, &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Input,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Output,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    EventEmitter &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// in template:    &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;div &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;icon&quot;&lt;/span&gt; (click)=&lt;span class=&quot;string&quot;&gt;&quot;onChecked()&quot;&lt;/span&gt;&amp;gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NoteCard&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @Input() note = &amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @Output() checked = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; EventEmitter();  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    onChecked() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.checked.next(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.note);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;$event&lt;/code&gt; can be used as Rx parameter, e.g., the &lt;code&gt;color&lt;/code&gt; object is passing in.&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;col-xs-3&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;color-picker&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        (&lt;span class=&quot;attr&quot;&gt;selectedInput&lt;/span&gt;)=&lt;span class=&quot;string&quot;&gt;&quot;onColorSelected($event)&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        [&lt;span class=&quot;attr&quot;&gt;colors&lt;/span&gt;]=&lt;span class=&quot;string&quot;&gt;&quot;colors&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;color-picker&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;with function …&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;onColorSelected(color: string) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.newNote.color = color;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;basic-routing&quot;&gt;&lt;a href=&quot;#Basic-Routing&quot; class=&quot;headerlink&quot; title=&quot;Basic Routing&quot;&gt;&lt;/a&gt;&lt;strong&gt;Basic Routing&lt;/strong&gt;&lt;/h3&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Three main components configure routing&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Routes&lt;/strong&gt; describes the application’s routes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RouterOutlet&lt;/strong&gt; is a “placeholder” component that gets expanded to each route’s content&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RouterLink&lt;/strong&gt; is used to link to routes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Routes&lt;/em&gt;&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Routes &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/router&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; Main, Notes, About&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;../containers&#39;&lt;/span&gt;; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; routes: Routes = [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// &amp;#123; path: &#39;&#39;, redirectTo: &#39;home&#39;, pathMatch: &#39;full&#39; &amp;#125;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, component: Main,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        children: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;, component: Notes&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#123; path: &lt;span class=&quot;string&quot;&gt;&#39;about&#39;&lt;/span&gt;,  component: About &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;]&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;RouterOutlet&lt;/em&gt;&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &lt;span class=&quot;string&quot;&gt;&#39;main-container&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    template: &lt;span class=&quot;string&quot;&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;router-outlet&amp;gt;&amp;lt;/router-outlet&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    `&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt; RouterLink&lt;/em&gt;&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; RouterLink &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/router&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@Component(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    selector: &lt;span class=&quot;string&quot;&gt;&#39;app-bar&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    template: &lt;span class=&quot;string&quot;&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;header class=&quot;app-bar row middle-xs&quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;span [routerLink]=&quot;[&#39;&#39;]&quot; class=&quot;logo col-xs-10&quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Home&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;/span&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;nav class=&quot;col-xs-2&quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;lt;div class=&quot;row middle-xs between-xs&quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;lt;span [routerLink]=&quot;[&#39;&#39;, &#39;about&#39;]&quot;  class=&quot;link&quot;&amp;gt;About&amp;lt;/span&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;/nav&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;/header&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    `,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Ref:&lt;/strong&gt; &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://angular.io/docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;angular docs.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;www.ng-book.com/2/&quot;&gt;ng-book&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.ng-book.com/basic-routing-in-angular-2/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;basic routing in angular 2&lt;/a&gt;    &lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h2 id=&quot;Angular-2-Basic&quot;&gt;&lt;a href=&quot;#Angular-2-Basic&quot; class=&quot;headerlink&quot; title=&quot;Angular 2 Basic&quot;&gt;&lt;/a&gt;&lt;strong&gt;Angular 2 Basic&lt;/strong&gt;&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The heart of angular 2 is &lt;code&gt;containers&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;import from &lt;code&gt;angular/core&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Component, &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Input,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Output,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    EventEmitter &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@angular/core&#39;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://volcanohong.github.com/categories/Javascript/"/>
    
    
      <category term="angular2" scheme="http://volcanohong.github.com/tags/angular2/"/>
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>SQL notes I</title>
    <link href="http://volcanohong.github.com/2016/09/12/sql-notes-1/"/>
    <id>http://volcanohong.github.com/2016/09/12/sql-notes-1/</id>
    <published>2016-09-13T04:00:00.000Z</published>
    <updated>2016-10-01T17:37:50.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;design-a-table-with-a-primary-key-of-varchar-or-int&quot;&gt;&lt;a href=&quot;#Design-a-table-with-a-primary-key-of-varchar-or-int&quot; class=&quot;headerlink&quot; title=&quot;Design a table with a primary key of varchar or int?&quot;&gt;&lt;/a&gt;&lt;strong&gt;Design a table with a primary key of varchar or int?&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;In gereral, &lt;code&gt;VARCHAR&lt;/code&gt; or &lt;code&gt;INT&lt;/code&gt; has no big differency in query. What matter is the access pattern.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Narrowness:&lt;/strong&gt;&lt;br&gt;On absolute terms, a wider key will always be worse than a narrow key. The type carries no importance, is the width of the key that matters. When compared with INT though, few types can beat INT in narrowness, so INT usually wins that argument just by the fact that it is only 4 bytes wide.&lt;/p&gt;
&lt;p&gt;More on this aspect:&lt;br&gt;In most cases, The Primary Key (PK) is defined as INT NOT NULL IDENTITY(1,1) field in each table.&lt;br&gt;On one side, with an IDENTITY field, the database handles all the details of making sure it’s really unique, and the INT datatype is just 4 bytes, and fixed, so it’s easier and more suited to be used for the primary (and clustering) key in the table.&lt;br&gt;On the other side, using a VARCHAR(10) or (20) just uses up too much space - 10 or 20 bytes instead of 4.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Another fact is when choosing the PK usually one also selects the clustered key. Those two are often confused. By default, SQL server chooses PK as one of clustering indexes.&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;Clustering Index:&lt;/strong&gt;&lt;br&gt;The idea of clustered indexes is to store a complete table in a B-tree structure. If a table has a clustered index, it basically means the index is the table. A clustered index has a strict row order like any other B-tree index: it sorts the rows according to the index definition.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Pros&lt;/em&gt;&lt;br&gt;The upside of clustered indexes is that they can deliver subsequent rows quickly when accessed directly (not via a non-clustered index). In other words, they are fast if you use the clustering key to fetch several rows. Remember that the primary key is the clustering key per default. In that case, it means fetching several rows via primary key—with a single query.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Cons&lt;/em&gt;&lt;br&gt;How bad is the cluster index in query?&lt;/p&gt;
&lt;p&gt;Rows Fetched | Time (Heap) | Time (Clustered)&lt;/p&gt;
&lt;p&gt;10.000 | 31 | 78&lt;/p&gt;
&lt;p&gt;20.000 | 47 |130&lt;/p&gt;
&lt;p&gt;50.000 | 109 |297&lt;/p&gt;
&lt;p&gt;100.000 | 203 | 624&lt;/p&gt;
&lt;p&gt;200.000 | 390 | 1232&lt;/p&gt;
&lt;p&gt;Ref: &lt;a href=&quot;https://use-the-index-luke.com/blog/2014-01/unreasonable-defaults-primary-key-clustering-key&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Unreasonable Defaults: Primary Key as Clustering Key&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The clustering key value will be repeated on every single index entry on every single non-clustered index on the table, so potentially, it is wasting a lot of space (not just on disk - that’s cheap - but also in SQL Server’s main memory). Also, since it’s variable (might be 4, might be 20 chars) it’s harder to SQL server to properly maintain a good index structure.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Conclusion&lt;/strong&gt;, it is always the right choice to start with INT NOT NULL IDENTITY(1,1)as the PK. However if considering VARCHAR type PK, it is better to avoid to use it as one of the clustering indexes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;description-of-primary-keys-and-clustered-keys&quot;&gt;&lt;a href=&quot;#Description-of-primary-keys-and-clustered-keys&quot; class=&quot;headerlink&quot; title=&quot;Description of primary keys and clustered keys&quot;&gt;&lt;/a&gt;&lt;strong&gt;Description of primary keys and clustered keys&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Primary keys&lt;/strong&gt; are logical business elements. The primary key is used by your application to identify an entity, and the discussion about primary keys is largely wether to use natural keys or surrogate key. The links go into much more detail, but the basic idea is that natural keys are derived from an existing entity property like ssn or phone number, while surrogate keys have no meaning whatsoever with regard to the business entity, like id or rowid and they are usually of type IDENTITY or some sort of uuid. My personal opinion is that surrogate keys are superior to natural keys, and the choice should be always identity values for local only applicaitons, guids for any sort of distributed data. A primary key never changes during the lifetime of the entity.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Clustered keys&lt;/strong&gt; are the key that defines the physical storage of rows in the table. Most times they overlap with the primary key (the logical entity identifier), but that is not actually enforced nor required. When the two are different it means there is a non-clustered unique index on the table that implements the primary key. Clustered key values can actualy change during the lifetime of the row, resulting in the row being physically moved in the table to a new location. If you have to separate the primary key from the clustered key (and sometimes you do), choosing a good clustered key is significantly harder than choosing a primary key.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;sql-scripts-to-set-non-cluster-index&quot;&gt;&lt;a href=&quot;#SQL-scripts-to-set-non-cluster-index&quot; class=&quot;headerlink&quot; title=&quot;SQL scripts to set non-cluster index&quot;&gt;&lt;/a&gt;&lt;strong&gt;SQL scripts to set non-cluster index&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- Enforces the Primary Key constraint with a Unique Non-Clustered Index&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; Foo1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col1 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; PRIMARY &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; NONCLUSTERED,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col2 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col3 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GO&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;A table without clustered index uses Heap structure to query data.&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- Create the Primary Key constraint on an ever-increasing&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- key column&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; Foo2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col1 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; PRIMARY &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; NONCLUSTERED,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col2 UNIQUEIDENTIFIER &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col3 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GO&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- Create the Clustered Index on a random key column&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;UNIQUE&lt;/span&gt; CLUSTERED &lt;span class=&quot;keyword&quot;&gt;INDEX&lt;/span&gt; ci_Col2 &lt;span class=&quot;keyword&quot;&gt;ON&lt;/span&gt; Foo2(Col2)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GO&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;A table has both clustered and non-clustered indexes.&lt;/p&gt;
&lt;p&gt;Following are the advantages of focusing on index-only scans instead of clustered indexes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;You are not limited to one index. Any index can be as fast as a clustered index.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Adding INCLUDE columns to a non-clustered index doesn’t affect anything else than this particular index. There is no penalty that hurts all other indexes!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;You don’t need to add all table columns to a non-clustered index to enable an index-only scan. Just add the columns that are relevant for the query you’d like to tune. That keeps the index small and can thus become even faster than a clustered index.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;And the best part is: there is no mutual exclusion of index-only scans and clustered indexes. Index-only scans work irrespective of the table storage. You can extend non-clustered indexes for index-only scans even if there is a clustered index. That’s also an easy way to avoid paying the “clustered index penalty” on non-clustered indexes.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- Enforces the Primary Key constraint with a Unique Non-Clustered Index&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; Foo1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col1 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; PRIMARY &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; NONCLUSTERED,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col2 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col3 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GO&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- Create the Primary Key constraint on an ever-increasing&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- key column&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; Foo2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col1 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; PRIMARY &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; NONCLUSTERED,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col2 UNIQUEIDENTIFIER &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Col3 &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GO&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- Create the Clustered Index on a random key column&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;UNIQUE&lt;/span&gt; CLUSTERED &lt;span class=&quot;keyword&quot;&gt;INDEX&lt;/span&gt; ci_Col2 &lt;span class=&quot;keyword&quot;&gt;ON&lt;/span&gt; Foo2(Col2)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GO&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;what-is-a-guid&quot;&gt;&lt;a href=&quot;#What-is-a-GUID&quot; class=&quot;headerlink&quot; title=&quot;What is a GUID?&quot;&gt;&lt;/a&gt;&lt;strong&gt;What is a GUID?&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GUID (or UUID) is an acronym for ‘Globally Unique Identifier’ (or ‘Universally Unique Identifier’). It is a 128-bit integer number used to identify resources. The term GUID is generally used by developers working with Microsoft technologies, while UUID is used everywhere else.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How unique is a GUID?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;128-bits is big enough and the generation algorithm is unique enough that if 1,000,000,000 GUIDs per second were generated for 1 year the probability of a duplicate would be only 50%. Or if every human on Earth generated 600,000,000 GUIDs there would only be a 50% probability of a duplicate.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How are GUIDs used?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GUIDs are used in enterprise software development in C#, Java, and C++ as database keys, component identifiers, or just about anywhere else a truly unique identifier is required. GUIDs are also used to identify all interfaces and objects in COM programming.&lt;/p&gt;
&lt;p&gt;SQL Server has the creation of GUID’s built in. There is no need to write a separate stored procedure for this.&lt;br&gt;You can use&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- `NEWID()`
- `NEWSEQUENTIALID()`
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The key difference between both procedures would be that the sequential GUID should be used if it is for a primary clustered key.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;Design-a-table-with-a-primary-key-of-varchar-or-int&quot;&gt;&lt;a href=&quot;#Design-a-table-with-a-primary-key-of-varchar-or-int&quot; class=&quot;headerlink&quot; title=&quot;Design a table with a primary key of varchar or int?&quot;&gt;&lt;/a&gt;&lt;strong&gt;Design a table with a primary key of varchar or int?&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;In gereral, &lt;code&gt;VARCHAR&lt;/code&gt; or &lt;code&gt;INT&lt;/code&gt; has no big differency in query. What matter is the access pattern.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Narrowness:&lt;/strong&gt;&lt;br&gt;On absolute terms, a wider key will always be worse than a narrow key. The type carries no importance, is the width of the key that matters. When compared with INT though, few types can beat INT in narrowness, so INT usually wins that argument just by the fact that it is only 4 bytes wide.&lt;/p&gt;
&lt;p&gt;More on this aspect:&lt;br&gt;In most cases, The Primary Key (PK) is defined as INT NOT NULL IDENTITY(1,1) field in each table.&lt;br&gt;On one side, with an IDENTITY field, the database handles all the details of making sure it’s really unique, and the INT datatype is just 4 bytes, and fixed, so it’s easier and more suited to be used for the primary (and clustering) key in the table.&lt;br&gt;On the other side, using a VARCHAR(10) or (20) just uses up too much space - 10 or 20 bytes instead of 4.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Another fact is when choosing the PK usually one also selects the clustered key. Those two are often confused. By default, SQL server chooses PK as one of clustering indexes.&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Database" scheme="http://volcanohong.github.com/categories/Database/"/>
    
    
      <category term="database" scheme="http://volcanohong.github.com/tags/database/"/>
    
      <category term="sql server" scheme="http://volcanohong.github.com/tags/sql-server/"/>
    
      <category term="sql" scheme="http://volcanohong.github.com/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>Machine learning notes</title>
    <link href="http://volcanohong.github.com/2016/09/01/machine-learning-notes/"/>
    <id>http://volcanohong.github.com/2016/09/01/machine-learning-notes/</id>
    <published>2016-09-02T04:00:00.000Z</published>
    <updated>2016-09-07T21:07:48.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;what-is-machine-learning&quot;&gt;&lt;a href=&quot;#What-is-machine-learning&quot; class=&quot;headerlink&quot; title=&quot;What is machine learning?&quot;&gt;&lt;/a&gt;&lt;strong&gt;What is machine learning?&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Core Task&lt;ul&gt;
&lt;li&gt;Finds patterns in data&lt;/li&gt;
&lt;li&gt;Use those patterns to predict future&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/ml_offering.png&quot; alt=&quot;Example Machine Learning Offerings&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What is learning?&lt;ul&gt;
&lt;li&gt;Identifying patterns&lt;/li&gt;
&lt;li&gt;Recognizing those patterns when you see them again&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Machine can find a pattern in existing data, then create and use a model that recognize those patterns in new data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt; 
&lt;p&gt;&lt;img src=&quot;/content/images/2016/ml_nutshell.png&quot; alt=&quot;Inside Machine Learning&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A Data Scientist needs to master&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;statistics&lt;/li&gt;
&lt;li&gt;machine learning software&lt;/li&gt;
&lt;li&gt;some problem domain (application fields)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Languages&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;R&lt;/li&gt;
&lt;li&gt;Python&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;steps-of-sovling-a-problem&quot;&gt;&lt;a href=&quot;#Steps-of-Sovling-a-Problem&quot; class=&quot;headerlink&quot; title=&quot;Steps of Sovling a Problem&quot;&gt;&lt;/a&gt;&lt;strong&gt;Steps of Sovling a Problem&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Ask a question first? such as…&lt;ul&gt;
&lt;li&gt;How to keep a player to play longer?&lt;/li&gt;
&lt;li&gt;How to get a player to play instantly?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/ml_1st_step.png&quot; alt=&quot;1st Step of Machine Learning&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Whether or not having lots of right data?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Pattern, Model and Application?&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/ml_process.png&quot; alt=&quot;Machine Learning Process&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Need knowledge:&lt;ul&gt;
&lt;li&gt;Training data: the prepared data used to create a model&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Supervised learning&lt;/em&gt;: the value you want to predict is in the training data, data is labelled, the target value is part of training data.&lt;br&gt;(and &lt;em&gt;unsupervised learning&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Classifying machine learning problems and algorithms&lt;ul&gt;
&lt;li&gt;Supervised: Regression, Classification,&lt;/li&gt;
&lt;li&gt;Unsupervised: Clustering Algorithms: Decision tree, Neural network, Bayesian, K-means&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/ml_entire_process.png&quot; alt=&quot;Repeating Machine Learning Process&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Training a model&lt;/li&gt;
&lt;li&gt;Testing a model&lt;/li&gt;
&lt;li&gt;Using a model&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;What-is-machine-learning&quot;&gt;&lt;a href=&quot;#What-is-machine-learning&quot; class=&quot;headerlink&quot; title=&quot;What is machine learning?&quot;&gt;&lt;/a&gt;&lt;strong&gt;What is machine learning?&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Core Task&lt;ul&gt;
&lt;li&gt;Finds patterns in data&lt;/li&gt;
&lt;li&gt;Use those patterns to predict future&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/ml_offering.png&quot; alt=&quot;Example Machine Learning Offerings&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What is learning?&lt;ul&gt;
&lt;li&gt;Identifying patterns&lt;/li&gt;
&lt;li&gt;Recognizing those patterns when you see them again&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Machine can find a pattern in existing data, then create and use a model that recognize those patterns in new data&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Big data" scheme="http://volcanohong.github.com/categories/Big-data/"/>
    
    
      <category term="big data" scheme="http://volcanohong.github.com/tags/big-data/"/>
    
      <category term="AI" scheme="http://volcanohong.github.com/tags/AI/"/>
    
      <category term="machine learning" scheme="http://volcanohong.github.com/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>Hippo notes 2</title>
    <link href="http://volcanohong.github.com/2016/08/24/hippo-notes-2/"/>
    <id>http://volcanohong.github.com/2016/08/24/hippo-notes-2/</id>
    <published>2016-08-25T04:00:00.000Z</published>
    <updated>2016-08-24T04:15:55.000Z</updated>
    
    <content type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;carousel-parameters&quot;&gt;&lt;a href=&quot;#Carousel-Parameters&quot; class=&quot;headerlink&quot; title=&quot;Carousel Parameters&quot;&gt;&lt;/a&gt;&lt;strong&gt;Carousel Parameters&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Problem: In Hippo banner carousel setting, changing parameter &lt;code&gt;height&lt;/code&gt; has no effect. &lt;/p&gt;
&lt;p&gt;Solution: This is because missing configuration of CSS with parameter &lt;code&gt;height&lt;/code&gt; in &lt;code&gt;essentials-carousel.ftl&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The following code is a good example to show that using object from java bean to dynamically configure the CSS in script.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;#-- @ftlvariable name=&amp;quot;cparam&amp;quot; type=&amp;quot;org.onehippo.cms7.essentials.components.info.EssentialsCarouselComponentInfo&amp;quot; --&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;@hst.headContribution&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;category&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;htmlHead&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;style&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/css&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;#--&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;Carousel&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;base&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;--&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        .swiper-wrapper &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            max-height: $&amp;#123;cparam.carouselHeight&amp;#125;px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;@hst.headContribution&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;carousel-parameters&quot;&gt;&lt;a href=&quot;#Carousel-Parameters&quot; class=&quot;headerlink&quot; title=&quot;Carousel Parameters&quot;&gt;&lt;/a&gt;&lt;s
    
    </summary>
    
      <category term="Hippo" scheme="http://volcanohong.github.com/categories/Hippo/"/>
    
    
      <category term="javascript" scheme="http://volcanohong.github.com/tags/javascript/"/>
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
      <category term="hippo" scheme="http://volcanohong.github.com/tags/hippo/"/>
    
      <category term="freemarker" scheme="http://volcanohong.github.com/tags/freemarker/"/>
    
      <category term="cms" scheme="http://volcanohong.github.com/tags/cms/"/>
    
  </entry>
  
  <entry>
    <title>Spring MVC notes I</title>
    <link href="http://volcanohong.github.com/2016/08/12/spring-mvc-notes/"/>
    <id>http://volcanohong.github.com/2016/08/12/spring-mvc-notes/</id>
    <published>2016-08-13T00:53:18.000Z</published>
    <updated>2016-08-14T00:54:00.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;mvc&quot;&gt;&lt;a href=&quot;#MVC&quot; class=&quot;headerlink&quot; title=&quot;MVC&quot;&gt;&lt;/a&gt;&lt;strong&gt;MVC&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;A web framework built around the principles of &lt;code&gt;Spring&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;POJO&lt;/code&gt; based and interface driven&lt;/li&gt;
&lt;li&gt;Based on a Dispatcher Servlet / Front Controller pattern&lt;/li&gt;
&lt;li&gt;Support for:&lt;ul&gt;
&lt;li&gt;Themes&lt;/li&gt;
&lt;li&gt;Locales | i18n&lt;/li&gt;
&lt;li&gt;Restful services&lt;/li&gt;
&lt;li&gt;Annotation based configuration&lt;/li&gt;
&lt;li&gt;Seamless integration with other Spring Service/beans&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Request / Response Lifecycle&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/content/images/2016/mvc_frame.png&quot; alt=&quot;MVC Framework&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DispatherServlet&lt;/strong&gt;: The entry / configuration point for the application&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Controller&lt;/strong&gt;: Command pattern object that handles the request and determines which view to route to&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RequestMapping&lt;/strong&gt;: The url and request type that a methode is tied to&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ViewResolver&lt;/strong&gt;: Used to locate JSP pages etc.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Servlet-config&lt;/strong&gt;: Configuration file per &lt;code&gt;DispatcherServlet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;POJO&lt;/strong&gt;: Plain Old Java Object&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bean&lt;/strong&gt;: A Spring configured POJO&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;maven&quot;&gt;&lt;a href=&quot;#Maven&quot; class=&quot;headerlink&quot; title=&quot;Maven&quot;&gt;&lt;/a&gt;&lt;strong&gt;Maven&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Dependencies:&lt;ul&gt;
&lt;li&gt;spring-webmvc&lt;/li&gt;
&lt;li&gt;servlet-api&lt;/li&gt;
&lt;li&gt;jstl&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;MVC&quot;&gt;&lt;a href=&quot;#MVC&quot; class=&quot;headerlink&quot; title=&quot;MVC&quot;&gt;&lt;/a&gt;&lt;strong&gt;MVC&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;A web framework built around the principles of &lt;code&gt;Spring&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;POJO&lt;/code&gt; based and interface driven&lt;/li&gt;
&lt;li&gt;Based on a Dispatcher Servlet / Front Controller pattern&lt;/li&gt;
&lt;li&gt;Support for:&lt;ul&gt;
&lt;li&gt;Themes&lt;/li&gt;
&lt;li&gt;Locales | i18n&lt;/li&gt;
&lt;li&gt;Restful services&lt;/li&gt;
&lt;li&gt;Annotation based configuration&lt;/li&gt;
&lt;li&gt;Seamless integration with other Spring Service/beans&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Spring" scheme="http://volcanohong.github.com/categories/Spring/"/>
    
    
      <category term="coding" scheme="http://volcanohong.github.com/tags/coding/"/>
    
      <category term="Spring" scheme="http://volcanohong.github.com/tags/Spring/"/>
    
      <category term="Java" scheme="http://volcanohong.github.com/tags/Java/"/>
    
      <category term="MVC" scheme="http://volcanohong.github.com/tags/MVC/"/>
    
  </entry>
  
  <entry>
    <title>Freemarker notes</title>
    <link href="http://volcanohong.github.com/2016/08/10/freemarker-notes/"/>
    <id>http://volcanohong.github.com/2016/08/10/freemarker-notes/</id>
    <published>2016-08-11T00:52:33.000Z</published>
    <updated>2016-08-14T00:53:57.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;built-in-function&quot;&gt;&lt;a href=&quot;#Built-in-Function&quot; class=&quot;headerlink&quot; title=&quot;Built-in Function&quot;&gt;&lt;/a&gt;&lt;strong&gt;Built-in Function&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Built-ins are like methods that are added to the objects by &lt;code&gt;FreeMarker&lt;/code&gt;. To prevent name clashes with actual methods and other sub-variables, instead of dot (.), you separate them from the parent object with question mark (?).&lt;/p&gt;
&lt;p&gt;Some examples:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testString?upper_case&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testString?html&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testString?upper_case?html&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testSequence?size&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testSequence?join(&amp;quot;, &amp;quot;)&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Assuming that testString stores the string “Tom &amp;amp; Jerry”, and testSequnce stores the strings “foo”, “bar” and “baz”, the output will be:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;TOM &amp;amp; JERRY&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Tom &amp;amp;amp; Jerry&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TOM &amp;amp;amp; JERRY&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;foo, bar, baz&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;html&lt;/code&gt;(deprecated): This built-in is deprecated by the auto-escaping mechanism introduced in 2.3.24. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Other examples:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;path?ensure_starts_with(&amp;apos;/&amp;apos;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path?length &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;#--not path?length()--&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Ref links: &lt;a href=&quot;http://freemarker.org/docs/ref_builtins_string.html#ref_builtin_html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;builtin methods&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;Built-in-Function&quot;&gt;&lt;a href=&quot;#Built-in-Function&quot; class=&quot;headerlink&quot; title=&quot;Built-in Function&quot;&gt;&lt;/a&gt;&lt;strong&gt;Built-in Function&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Built-ins are like methods that are added to the objects by &lt;code&gt;FreeMarker&lt;/code&gt;. To prevent name clashes with actual methods and other sub-variables, instead of dot (.), you separate them from the parent object with question mark (?).&lt;/p&gt;
&lt;p&gt;Some examples:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testString?upper_case&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testString?html&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testString?upper_case?html&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testSequence?size&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&amp;#123;testSequence?join(&amp;quot;, &amp;quot;)&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Assuming that testString stores the string “Tom &amp;amp; Jerry”, and testSequnce stores the strings “foo”, “bar” and “baz”, the output will be:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;TOM &amp;amp; JERRY&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Tom &amp;amp;amp; Jerry&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TOM &amp;amp;amp; JERRY&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;foo, bar, baz&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;html&lt;/code&gt;(deprecated): This built-in is deprecated by the auto-escaping mechanism introduced in 2.3.24. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Other examples:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;path?ensure_starts_with(&amp;apos;/&amp;apos;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path?length &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;#--not path?length()--&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Ref links: &lt;a href=&quot;http://freemarker.org/docs/ref_builtins_string.html#ref_builtin_html&quot;&gt;builtin methods&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="HTML" scheme="http://volcanohong.github.com/categories/HTML/"/>
    
    
      <category term="html" scheme="http://volcanohong.github.com/tags/html/"/>
    
      <category term="hippo" scheme="http://volcanohong.github.com/tags/hippo/"/>
    
      <category term="freemarker" scheme="http://volcanohong.github.com/tags/freemarker/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop notes I</title>
    <link href="http://volcanohong.github.com/2016/08/08/hadoop-notes/"/>
    <id>http://volcanohong.github.com/2016/08/08/hadoop-notes/</id>
    <published>2016-08-09T00:51:37.000Z</published>
    <updated>2016-09-07T20:42:00.000Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;&lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Why big data?&lt;br&gt;In case of Google:&lt;ul&gt;
&lt;li&gt;~40 billion web pages x 30 kb each = Petabyte&lt;/li&gt;
&lt;li&gt;average disk speed reads about 120 mb/sec&lt;/li&gt;
&lt;li&gt;over 3 months to read the web&lt;/li&gt;
&lt;li&gt;about 1,000 drives to store and use&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;   
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Distributed computing challenge&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Scale out with distributed computing&lt;/li&gt;
&lt;li&gt;Volume, velocity and variety&lt;/li&gt;
&lt;li&gt;Recover from failures&lt;/li&gt;
&lt;li&gt;Shared nothing architecture (name node &amp;amp; job tracker) &lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;a. Google file system (GFS) (2003), which the hadoop file system (HDFS) is based upon.&lt;br&gt;b. MapReduce (2004)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Hadoop&lt;ul&gt;
&lt;li&gt;Open source&lt;/li&gt;
&lt;li&gt;Relax the complexities of distributed systems&lt;/li&gt;
&lt;li&gt;Fault-tolerant distributed file system &lt;/li&gt;
&lt;li&gt;API &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;HDFS&lt;ul&gt;
&lt;li&gt;Tackle files rather than database&lt;/li&gt;
&lt;li&gt;Split file into chunks or blocks (64 to 128 mb each)&lt;/li&gt;
&lt;li&gt;Place each block of data on a different data node, and replicate each block to three nodes by default&lt;/li&gt;
&lt;li&gt;Read data in the same rack  &lt;/li&gt;
&lt;li&gt;Hive query &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;MapReduce&lt;ul&gt;
&lt;li&gt;Map&lt;/li&gt;
&lt;li&gt;Shuffle and sort&lt;/li&gt;
&lt;li&gt;Reduce&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;&lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h4&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Why big data?&lt;br&gt;In case of Google:&lt;ul&gt;
&lt;li&gt;~40 billion web pages x 30 kb each = Petabyte&lt;/li&gt;
&lt;li&gt;average disk speed reads about 120 mb/sec&lt;/li&gt;
&lt;li&gt;over 3 months to read the web&lt;/li&gt;
&lt;li&gt;about 1,000 drives to store and use
    
    </summary>
    
      <category term="Big data" scheme="http://volcanohong.github.com/categories/Big-data/"/>
    
    
      <category term="big data" scheme="http://volcanohong.github.com/tags/big-data/"/>
    
      <category term="hadoop" scheme="http://volcanohong.github.com/tags/hadoop/"/>
    
      <category term="hive" scheme="http://volcanohong.github.com/tags/hive/"/>
    
  </entry>
  
</feed>
